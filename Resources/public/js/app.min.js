!function(){"use strict";angular.module("ezpAppCore",["ngRoute","ngCookies","ngAnimate","ngWig","720kb.datepicker","dotjem.angular.tree"]),angular.module("ezpAppCore").config(["$routeProvider","$locationProvider",function(a,b){var c="/adminapp";a.when(c+"/location",{templateUrl:"content/content.html",controller:"ezpContentCtrl",controllerAs:"content"}),a.when(c+"/location/:locationId",{templateUrl:"content/content.html",controller:"ezpContentCtrl",controllerAs:"content"}),a.when(c+"/contentsearch",{templateUrl:"content/content.search.html",controller:"ezpContentSearchCtrl",controllerAs:"contentsearch"}),a.when(c+"/contentsearch/:searchString",{templateUrl:"content/content.search.html",controller:"ezpContentSearchCtrl",controllerAs:"contentsearch"}),a.when(c+"/roles",{templateUrl:"roles/roles.html",controller:"ezpRolesCtrl",controllerAs:"roles"}),a.when(c+"/roles/:roleId",{templateUrl:"roles/roles.html",controller:"ezpRolesCtrl",controllerAs:"roles"}),a.when(c+"/contenttypes",{templateUrl:"contenttypes/contenttypes.html",controller:"ezpContentTypesCtrl",controllerAs:"contenttypes"}),a.when(c+"/contenttypes/type/:contentTypeId",{templateUrl:"contenttypes/contenttype/contenttype.view.html",controller:"ezpContentTypeViewCtrl",controllerAs:"contenttype"}),a.when(c+"/contenttypes/group/:contentTypeGroupId",{templateUrl:"contenttypes/contenttypes.html",controller:"ezpContentTypesCtrl",controllerAs:"contenttypes"}),a.when(c+"/setup",{templateUrl:"setup/setup.html",controller:"ezpSetupCtrl",controllerAs:"setup"}),a.when(c,{templateUrl:"login/login.html",controller:"ezpLoginCtrl",controllerAs:"login"}),a.otherwise({redirectTo:c}),b.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("ezpAppCore").config(["$compileProvider",function(a){a.debugInfoEnabled(!1),a.preAssignBindingsEnabled(!0)}])}(),angular.module("ezpAppCore").run(["$templateCache",function(a){"use strict";a.put("content/content.html",'<p ng-if="content.parentLocation" id="content-location-path" style="margin: 0 0 1em 0;">\n    {{\'You are here\'|i18n:\'content\'}}:\n    <strong>\n        <ezp-location-path pathstring="content.location.pathString"></ezp-location-path>\n    </strong>\n</p>\n\n<button ng-if="content.canContentEdit" class="right" ng-click="::showModalEdit()">{{\'Edit\'|i18n:\'content\'}}</button>\n<button ng-if="content.canContentMove" class="right" ng-click="::showModalMove()">{{\'Move\'|i18n:\'content\'}}</button>\n<button ng-if="content.canContentRemove" class="right" ng-click="::showModalRemove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n<ezp-content-view id="content-view" ng-if="content.location.Content" request="content.location.Content" language="content.location.mainLanguageCode" parent="content.location.pathString.slice(0, -1)"></ezp-content-view>\n\n<button ng-if="content.canContentCreate" class="right" ng-click="::showModalCreate()">{{\'Create\'|i18n:\'content\'}}</button>\n<select ng-if="content.canContentCreate" class="right" ng-model="content.selectedContentCreateContentType">\n    <!--option value="0"></option-->\n    <option ng-repeat="contentType in content.canContentCreate" value="{{contentType}}">\n        {{contentType|contenttypename}}\n    </option>\n</select>\n\n<ezp-location-children ng-if="content.location.childCount > 0" request="content.location.Children"></ezp-location-children>\n'),a.put("content/content.search.html","<h1>{{'Search content'|i18n:'content'}}</h1>\n\n<table>\n    <tr ng-repeat=\"item in contentsearch.searchHits\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n        <td>\n            <a ng-href=\"{{item.PathString.substring(0, item.PathString.length-1)|getapproute}}\">\n                {{item.Name}}\n            </a>\n        </td>\n        <td>{{item.ClassName}}</td>\n        <td>{{item.CurrentLanguage}}</td>\n    </tr>\n</table>\n"),a.put("content/locations/location.browse.modal.html",'<ezp-modal-layout />\n\n<form id="content-browse" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left">Browse ToDo: root nodes, up, home, searchbox, u.a.|i18n:\'content\'</h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::location.select[location.action]()">{{\'Select\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n<div ng-if="location.hasChildren" id="location-browse">\n    <h2><a href ng-click="::location.requestLink(location.parent)">{{\'Up\'|i18n:\'content\'}}</a></h2>\n    <table>\n        <thead>\n            <tr>\n                <th>&nbsp;</th>\n'+"                <th>{{'Name'|i18n:'content'}}</th>\n                <th>{{'Language'|i18n:'content'}}</th>\n                <th>{{'Hidden'|i18n:'content'}}</th>\n                <!--th>{{'Invisible'|i18n:'content'}}</th-->\n                <th>{{'Section'|i18n:'content'}}</th>\n                <th>{{'Contenttype'|i18n:'content'}}</th>\n                <th>{{'Modified'|i18n:'content'}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat=\"item in location.children\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n                <td>\n                    <!-- ToDo if != own -->\n                    <!--input ng-if=\"multiple\" type=\"checkbox\" /-->\n                    <input type=\"checkbox\" ng-model=\"item.selected\" ng-click=\"::location.setLocationSelection($index)\" ng-class=\"{'radio': !location.multi}\" />\n                </td>\n                <td>\n                    <a ng-if=\"item.childCount\" href ng-click=\"::location.requestLink({'_href':item.Children['_href'],'_media-type':item.Children['_media-type']})\">\n                        {{item.name}}\n                    </a>\n                    <span ng-if=\"!item.childCount\">{{item.name}}</span>\n                </td>\n                <td>\n                    <img class=\"flag-icon\" ng-src=\"{{::location.pathAssets}}/images/flags/{{laguageCode}}.gif\" ng-repeat=\"laguageCode in ::location.getLanguageCodes(item.languageCodes)\" />\n                </td>\n                <td>{{item.hidden}}</td>\n                <!--td>{{item.invisible}}</td-->\n                <td>{{item.sectionId|sectionname}}</td>\n                <td>{{item.contentType|contenttypename}}</td>\n                <td>{{item.modificationDate|date:short}}</td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n        <button class=\"right\" ng-click=\"::close(false)\">{{'Close'|i18n:'content'}}</button>\n        <button class=\"right\" ng-click=\"::location.select[location.action]()\">{{'Select'|i18n:'content'}}</button>\n\n        <div class=\"break\"></div>\n    </div>\n    <div ng-click=\"::close(false)\" id=\"modal-overlay-fade\"></div>\n</form>"),a.put("content/locations/location.children.html",'<div ng-if="children.hasChildren" id="location-children">\n    <h1>children ({{children.hasChildren}})</h1>\n    <div class="break"></div>\n    <table>\n        <thead>\n            <tr>\n'+"                <th>{{'Name'|i18n:'content'}}</th>\n                <th>{{'Language'|i18n:'content'}}</th>\n                <th>{{'Hidden'|i18n:'content'}}</th>\n                <!--th>invisible</th-->\n                <th>{{'Section'|i18n:'content'}}</th>\n                <th>{{'Contentype'|i18n:'content'}}</th>\n                <th>{{'Modified'|i18n:'content'}}</th>\n                <th>{{'Published'|i18n:'content'}}</th>\n                <th>{{'Priority'|i18n:'content'}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat=\"item in children.locations\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n                <td>\n                    <a ng-href=\"{{::item['_href']|getapproute}}\">{{::item.name}}</a>\n                </td>\n                <td>\n                    <a ng-href=\"{{::item['_href']|getapproute}}\" ng-repeat=\"laguageCode in ::getLanguageCodes(item.languageCodes)\">\n                        <img class=\"flag-icon\" ng-src=\"{{::pathAssets}}/images/flags/{{::laguageCode}}.gif\" />\n                    </a>\n                </td>\n                <td>{{::item.hidden|i18n:'content'}}</td>\n                <!--td>{{::item.invisible}}</td-->\n                <td>{{::item.sectionId|sectionname}}</td>\n                <td>{{::item.contentType|contenttypename}}</td>\n                <td>{{::item.modificationDate|date:short}}</td>\n                <td>{{::item.publishedDate|date:short}}</td>\n                <td>{{::item.priority}}</td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n"),a.put("content/locations/location.remove.modal.html",'<ezp-modal-layout />\n\n<form id="location-remove" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left">Location remove|i18n</h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <p>ToDo: move to trash, locations and subtree, warning text</p>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("content/menu.html","<cjw-tool-box title=\"{{'Search'|i18n:'content'}}\">\n    <ezp-search-box />\n</cjw-tool-box>\n\n<cjw-tool-box title=\"{{'Content structure'|i18n:'content'}}\">\n"+'    <div id="treemenu" ng-controller="ezpTreemenuCtrl as tree">\n        <ul dx-start-with="tree.rootNode as prior">\n            <li ng-repeat="node in prior.children" ng-class="{\'treemenu-depth\': node.depth>=4}">\n                <span ng-if="node.name && !node.count" class="fa fa-square-o"></span>\n                <span ng-if="::node.count" class="pointer fa" ng-click="::tree.setNode(prior,$index,node.request)" ng-class="{\'fa-plus-square-o\': !node.active, \'fa-minus-square-o\': node.active}"></span>\n                <a ng-if="::node.name" ng-href="{{::node.href|getapproute:location}}" title="{{::node.name}}">{{::node.name}}</a>\n                <ul dx-connect="node" />\n            </li>\n        </ul>\n    </div>\n</cjw-tool-box>\n\n<cjw-tool-box title="{{\'Bookmarks\'|i18n:\'content\'}}">\n    <cjw-bookmarks />\n</cjw-tool-box>\n\n<cjw-tool-box title="{{\'My settings\'|i18n:\'content\'}}">\n    <ul>\n        <li>Change password</li>\n        <li>Edit profile</li>\n        <li>Switch locale</li>\n    </ul>\n</cjw-tool-box>\n\n<cjw-tool-box title="{{\'Multiupload\'|i18n:\'content\'}}">\n    <ul>\n        <li>multiupload</li>\n    </ul>\n</cjw-tool-box>\n'),a.put("content/objects/content.create.modal.html",'<ezp-modal-layout />\n\n<form id="content-create" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left">New {{content.title|contenttypename}}</h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <table>\n            <tr ng-repeat="(key,field) in content.fields">\n                <th ng-bind="::field.fieldDefinitionIdentifier"></th>\n                <td>\n<ezp-fieldvalue-edit-ezboolean ng-if="::field.fieldTypeIdentifier === \'ezboolean\'"></ezp-fieldvalue-edit-ezboolean>\n<ezp-fieldvalue-edit-ezdatetime ng-if="::field.fieldTypeIdentifier === \'ezdatetime\'"></ezp-fieldvalue-edit-ezdatetime>\n<ezp-fieldvalue-edit-ezimage ng-if="::field.fieldTypeIdentifier === \'ezimage\'"></ezp-fieldvalue-edit-ezimage>\n<ezp-fieldvalue-edit-ezkeyword ng-if="::field.fieldTypeIdentifier === \'ezkeyword\'"></ezp-fieldvalue-edit-ezkeyword>\n<ezp-fieldvalue-edit-ezobjectrelationlist ng-if="::field.fieldTypeIdentifier === \'ezobjectrelationlist\'"></ezp-fieldvalue-edit-ezobjectrelationlist>\n<ezp-fieldvalue-edit-ezpage ng-if="::field.fieldTypeIdentifier === \'ezpage\'"></ezp-fieldvalue-edit-ezpage>\n<ezp-fieldvalue-edit-ezstring ng-if="::field.fieldTypeIdentifier === \'ezstring\'"></ezp-fieldvalue-edit-ezstring>\n<ezp-fieldvalue-edit-ezurl ng-if="::field.fieldTypeIdentifier === \'ezurl\'"></ezp-fieldvalue-edit-ezurl>\n<ezp-fieldvalue-edit-ezxmltext ng-if="::field.fieldTypeIdentifier === \'ezxmltext\'"></ezp-fieldvalue-edit-ezxmltext>\n                </td>\n            </tr>\n        </table>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("content/objects/content.edit.modal.html",'<ezp-modal-layout />\n\n<form id="content-edit" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left" ng-bind="::content.name"></h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <table>\n            <tr ng-repeat="(key,field) in ::content.fields">\n                <th ng-bind="::field.fieldDefinitionIdentifier"></th>\n                <td>\n<ezp-fieldvalue-edit-ezboolean ng-if="::field.fieldTypeIdentifier === \'ezboolean\'"></ezp-fieldvalue-edit-ezboolean>\n<ezp-fieldvalue-edit-ezdatetime ng-if="::field.fieldTypeIdentifier === \'ezdatetime\'"></ezp-fieldvalue-edit-ezdatetime>\n<ezp-fieldvalue-edit-ezimage ng-if="::field.fieldTypeIdentifier === \'ezimage\'"></ezp-fieldvalue-edit-ezimage>\n<ezp-fieldvalue-edit-ezkeyword ng-if="::field.fieldTypeIdentifier === \'ezkeyword\'"></ezp-fieldvalue-edit-ezkeyword>\n<ezp-fieldvalue-edit-ezobjectrelationlist ng-if="::field.fieldTypeIdentifier === \'ezobjectrelationlist\'"></ezp-fieldvalue-edit-ezobjectrelationlist>\n<ezp-fieldvalue-edit-ezpage ng-if="::field.fieldTypeIdentifier === \'ezpage\'"></ezp-fieldvalue-edit-ezpage>\n<ezp-fieldvalue-edit-ezstring ng-if="::field.fieldTypeIdentifier === \'ezstring\'"></ezp-fieldvalue-edit-ezstring>\n<ezp-fieldvalue-edit-ezurl ng-if="::field.fieldTypeIdentifier === \'ezurl\'"></ezp-fieldvalue-edit-ezurl>\n<ezp-fieldvalue-edit-ezuser ng-if="::field.fieldTypeIdentifier === \'ezuser\'"></ezp-fieldvalue-edit-ezuser >\n<ezp-fieldvalue-edit-ezxmltext ng-if="::field.fieldTypeIdentifier === \'ezxmltext\'"></ezp-fieldvalue-edit-ezxmltext>\n                </td>\n            </tr>\n        </table>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("content/objects/content.remove.modal.html",'<ezp-modal-layout />\n\n<form id="content-remove" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left" ng-bind="::content.name"></h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <p>ToDo: move to trash, locations and subtree, warning text</p>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("content/objects/content.view.html","<p>\n    {{'Languages'|i18n:'content'}}:\n    <strong ng-repeat=\"languageCode in ::content.VersionInfo.languageCodes.split(',')\">\n        <span ng-if=\"languageCode === content.currentLanguageCode\" ng-bind=\"languageCode\"></span>\n        <a ng-if=\"languageCode !== content.currentLanguageCode\" href=\"\" ng-bind=\"languageCode\" ng-click=\"::content.updateLanguageVersion(languageCode)\"></a>\n    </strong>\n</p>\n\n<h1 ng-bind=\"content.name\"></h1>\n\n<div class=\"break\"></div>\n\n<cjw-tabset id=\"content_view_tabset\">\n    <cjw-tab name=\"{{'Content'|i18n:'content'}}\" id=\"content_view_tab_content\" selected>\n        <table>\n            <tr ng-repeat=\"field in content.Fields\">\n                <th ng-bind=\"field.fieldDefinitionIdentifier\"></th>\n                <td>\n<ezp-fieldvalue-view-ezboolean ng-if=\"field.fieldTypeIdentifier === 'ezboolean'\"></ezp-fieldvalue-view-ezboolean>\n<ezp-fieldvalue-view-ezdatetime ng-if=\"field.fieldTypeIdentifier === 'ezdatetime'\"></ezp-fieldvalue-view-ezdatetime>\n<ezp-fieldvalue-view-ezimage ng-if=\"field.fieldTypeIdentifier === 'ezimage'\"></ezp-fieldvalue-view-ezimage>\n<ezp-fieldvalue-view-ezkeyword ng-if=\"field.fieldTypeIdentifier === 'ezkeyword'\"></ezp-fieldvalue-view-ezkeyword>\n<ezp-fieldvalue-view-ezobjectrelationlist ng-if=\"field.fieldTypeIdentifier === 'ezobjectrelationlist'\"></ezp-fieldvalue-view-ezobjectrelationlist>\n<ezp-fieldvalue-view-ezpage ng-if=\"field.fieldTypeIdentifier === 'ezpage'\"></ezp-fieldvalue-view-ezpage>\n<ezp-fieldvalue-view-ezstring ng-if=\"field.fieldTypeIdentifier === 'ezstring'\"></ezp-fieldvalue-view-ezstring>\n<ezp-fieldvalue-view-ezurl ng-if=\"field.fieldTypeIdentifier === 'ezurl'\"></ezp-fieldvalue-view-ezurl>\n<ezp-fieldvalue-view-ezuser ng-if=\"field.fieldTypeIdentifier === 'ezuser'\"></ezp-fieldvalue-view-ezuser>\n<ezp-fieldvalue-view-ezxmltext ng-if=\"field.fieldTypeIdentifier === 'ezxmltext'\"></ezp-fieldvalue-view-ezxmltext>\n                </td>\n            </tr>\n        </table>\n    </cjw-tab>\n\n    <cjw-tab name=\"{{'Details'|i18n:'content'}}\" id=\"content_view_tab_details\">\n        <table>\n            <tr>\n                <th>ID|i18n</th>\n                <td>{{::content.id}}</td>\n            </tr>\n             <tr>\n                <th>Object Remote ID|i18n</th>\n                <td>{{::content.remoteId}}</td>\n            </tr>\n             <tr>\n                <th>Published|i18n</th>\n                <td>{{content.publishedDate|date:short}}</td>\n            </tr>\n             <tr>\n                <th>Modified|i18n</th>\n                <td>{{content.lastModificationDate|date:short}}</td>\n            </tr>\n             <tr>\n                <th>Main language code|i18n</th>\n                <td>{{content.mainLanguageCode}}</td>\n            </tr>\n             <tr>\n                <th>Section, hidden, invisible, Type, isContainer</th>\n                <td>ToDo</td>\n            </tr>\n             <tr>\n                <th>Always available|i18n</th>\n                <td>{{content.alwaysAvailable}}</td>\n            </tr>\n        </table>\n    </cjw-tab>\n\n    <cjw-tab name=\"{{'Versions'|i18n:'content'}}\" id=\"content_view_tab_versions\">\n        <table>\n            <thead>\n                <tr>\n                    <th>{{'Version'|i18n:'content'}}</th>\n                    <th>{{'Status'|i18n:'content'}}</th>\n                    <th>{{'Published'|i18n:'content'}}</th>\n                    <th>{{'Modified'|i18n:'content'}}</th>\n                    <th>{{'Creator'|i18n:'content'}}</th>\n                    <th>{{'Language'|i18n:'content'}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat=\"version in content.VersionList.VersionItem\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n                    <td>{{version.VersionInfo.versionNo}}</td>\n                    <td>{{version.VersionInfo.status|i18n:'content'}}</td>\n                    <td>{{version.VersionInfo.creationDate|date:short}}</td>\n                    <td>{{version.VersionInfo.modificationDate|date:short}}</td>\n                    <td>{{version.VersionInfo.Creator|getidfromhref}}</td>\n                    <td>{{version.VersionInfo.languageCodes}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </cjw-tab>\n\n    <cjw-tab name=\"{{'Locations'|i18n:'content'}}\" id=\"content_view_tab_locations\">\n        <table>\n            <thead>\n                <tr>\n                    <th>&nbsp;</th>\n                    <th style=\"width: 90%\">{{'Location'|i18n:'content'}}</th>\n                    <th>{{'Children'|i18n:'content'}}</th>\n                    <th>{{'Hidden'|i18n:'content'}}</th>\n                    <th>{{'Main location'|i18n:'content'}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat=\"location in content.LocationList.Location\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n                    <td>\n                        <input type=\"checkbox\" ng-if=\"location['_href'] === content.MainLocationHref\" ng-class=\"{'radio': !content.multi}\" disabled />\n                        <input type=\"checkbox\" ng-if=\"location['_href'] !== content.MainLocationHref\" ng-model=\"location.selected\" ng-click=\"::content.setLocationSelection($index)\" ng-class=\"{'radio': !content.multi}\" />\n                    </td>\n                    <td>\n                        <!--a ng-href=\"{{location['_href']|getapproute}}\">{{location.name}}</a-->\n                        <ezp-location-path pathstring=\"location['_href'].split('/locations')[1]+'/'\"></ezp-location-path>\n                    </td>\n                    <td>{{location.childCount|i18n:'content'}}</td>\n                    <td>{{location.hidden|i18n:'content'}}</td>\n                    <td>\n                        <input type=\"radio\" name=\"ismainlocation\" ng-checked=\"location['_href'] === content.MainLocationHref\" />\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <p class=\"tab-content text-center\">\n            <button class=\"left\" ng-click=\"::content.showModalRemoveLocation()\">{{'Remove location'|i18n:'content'}}</button>\n            <button ng-click=\"::content.showModalBrowseLocations('locationAdd')\">{{'Add location'|i18n:'content'}}</button>\n            <button class=\"right\" ng-click=\"::content.locationSetMain()\">ToDo: {{'Set main location'|i18n:'content'}}</button>\n        </p>\n    </cjw-tab>\n\n    <cjw-tab name=\"{{'Relations'|i18n:'content'}}\" id=\"content_view_tab_relations\">\n        <table ng-if=\"content.Relations.Relation.length > 0\">\n            <tr ng-repeat=\"relation in content.Relations.Relation\">\n                <th>ToDo:</th>\n                <td>{{relation['_href']}}</td>\n            </tr>\n        </table>\n        <p class=\"tab-content\" ng-if=\"content.Relations.Relation.length === 0\">\n            {{'No relations set'|i18n:'content'}}\n        </p>\n    </cjw-tab>\n\n    <cjw-tab name=\"{{'Extras'|i18n:'content'}}\" id=\"content_view_tab_extras\">\n        <table>\n            <tr>\n                <th>ToDo:</th>\n                <td>Set section</td>\n            </tr>\n            <tr>\n                <th>ToDo:</th>\n                <td>Set order</td>\n            </tr>\n            <tr>\n                <th>ToDo:</th>\n                <td>Swap node</td>\n            </tr>\n        </table>\n    </cjw-tab>\n</cjw-tabset>\n"),a.put("contenttypes/contenttype/contenttype.create.modal.html",'<ezp-modal-layout />\n\n<form id="contenttype-create" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left" ng-bind="::content.name"></h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <table>\n            <tr ng-repeat="(key,field) in ::content.fields">\n                <th ng-bind="::field.fieldDefinitionIdentifier"></th>\n                <td>\n<ezp-fieldvalue-edit-ezboolean ng-if="::field.fieldTypeIdentifier === \'ezboolean\'"></ezp-fieldvalue-edit-ezboolean>\n<ezp-fieldvalue-edit-ezdatetime ng-if="::field.fieldTypeIdentifier === \'ezdatetime\'"></ezp-fieldvalue-edit-ezdatetime>\n<ezp-fieldvalue-edit-ezimage ng-if="::field.fieldTypeIdentifier === \'ezimage\'"></ezp-fieldvalue-edit-ezimage>\n<ezp-fieldvalue-edit-ezkeyword ng-if="::field.fieldTypeIdentifier === \'ezkeyword\'"></ezp-fieldvalue-edit-ezkeyword>\n<ezp-fieldvalue-edit-ezobjectrelationlist ng-if="::field.fieldTypeIdentifier === \'ezobjectrelationlist\'"></ezp-fieldvalue-edit-ezobjectrelationlist>\n<ezp-fieldvalue-edit-ezpage ng-if="::field.fieldTypeIdentifier === \'ezpage\'"></ezp-fieldvalue-edit-ezpage>\n<ezp-fieldvalue-edit-ezstring ng-if="::field.fieldTypeIdentifier === \'ezstring\'"></ezp-fieldvalue-edit-ezstring>\n<ezp-fieldvalue-edit-ezurl ng-if="::field.fieldTypeIdentifier === \'ezurl\'"></ezp-fieldvalue-edit-ezurl>\n<ezp-fieldvalue-edit-ezuser ng-if="::field.fieldTypeIdentifier === \'ezuser\'"></ezp-fieldvalue-edit-ezuser >\n<ezp-fieldvalue-edit-ezxmltext ng-if="::field.fieldTypeIdentifier === \'ezxmltext\'"></ezp-fieldvalue-edit-ezxmltext>\n                </td>\n            </tr>\n        </table>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::publish()">{{\'Publish\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("contenttypes/contenttype/contenttype.remove.modal.html",'<ezp-modal-layout />\n\n<form id="content-remove" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left" ng-bind="::content.name"></h1>\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n\n        <p>ToDo:</p>\n\n        <button class="right" ng-click="::close(false)">{{\'Close\'|i18n:\'content\'}}</button>\n        <button class="right" ng-click="::remove()">{{\'Remove\'|i18n:\'content\'}}</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("contenttypes/contenttype/contenttype.update.modal.html",'<ezp-modal-layout />\n\n<form id="contenttype-edit" class="modal-animate" ng-if="animate">\n    <div id="modal-overlay-box">\n        <h1 class="left">{{\'Edit\'|i18n:\'contenttypes\'}} [{{contenttype.definition.names.value|translatevalue}}]</h1>\n        <button class="right" ng-click="::close(false)">{{\'Cancel\'|i18n:\'contenttypes\'}}</button>\n        <button class="right" ng-click="::contenttype.publish()">{{\'Publish\'|i18n:\'contenttypes\'}}</button>\n\n        <div class="break"></div>\n        <hr />\n\n        <div class="halfbox left">\n            <p><strong>{{\'Name\'|i18n:\'contenttypes\'}}:</strong><p>\n            <input class="box" ng-model="contenttype.definition.names.value[0][\'#text\']" required />\n        </div>\n\n        <div class="halfbox right">\n            <p><strong>{{\'Identifier\'|i18n:\'contenttypes\'}}:</strong><p>\n            <input class="box" ng-model="contenttype.definition.identifier" required />\n        </div>\n\n        <div class="halfbox left">\n            <p><strong>{{\'Object name schema\'|i18n:\'contenttypes\'}}:</strong><p>\n            <input class="box" ng-model="contenttype.definition.nameSchema" required />\n        </div>\n\n        <div class="halfbox right">\n            <p><strong>{{\'Features\'|i18n:\'contenttypes\'}}:</strong><p>\n            <p>\n                <input class="inline" type="checkbox" ng-model="contenttype.definition.isContainer" />\n                <strong>{{\'Container\'|i18n:\'contenttypes\'}}</strong> &nbsp;&nbsp;\n                <input class="inline" type="checkbox" ng-model="contenttype.definition.defaultAlwaysAvailable" />\n                <strong>{{\'Default availablity\'|i18n:\'contenttypes\'}}</strong>\n            </p>\n            <p></p>\n        </div>\n\n        <div class="break"></div>\n\n        <p><strong>{{\'Description\'|i18n:\'contenttypes\'}}:</strong><p>\n        <input class="box" ng-model="contenttype.definition.descriptions.value[0][\'#text\']" />\n\n        <p>\n            <strong>\n                [<a href ng-click="::contenttype.fieldsCollapseExpand(true)">Collapse all|i18n</a>]\n                &nbsp;&nbsp;\n                [<a href ng-click="::contenttype.fieldsCollapseExpand(false)">Expand all|i18n</a>]\n            </strong>\n        </p>\n\n        <div class="fielddefinition" ng-repeat="fieldtype in ::contenttype.definition.FieldDefinitions.FieldDefinition">\n            <h2 class="pointer fielddefinition-head" ng-click="::contenttype.fieldHide(fieldtype.id)">\n                {{fieldtype.position}}. {{fieldtype.names.value|translatevalue}} [{{fieldtype.fieldType|i18n:\'contenttypes\'}}] ({{\'Id\'|i18n:\'contenttypes\'}}:{{::fieldtype.id}})\n            </h2>\n\n            <div class="fielddefinition-body" ng-class="{\'show\': !contenttype.fieldsInactive[fieldtype.id], \'hide\': contenttype.fieldsInactive[fieldtype.id]}">\n                <div class="halfbox left">\n                    <p><strong>{{\'Name\'|i18n:\'contenttypes\'}}:</strong><p>\n                    <input class="box" ng-model="fieldtype.names.value[0][\'#text\']" required />\n                </div>\n\n                <div class="halfbox right">\n                    <p><strong>{{\'Identifier\'|i18n:\'contenttypes\'}}:</strong><p>\n                    <input class="box" ng-model="fieldtype.identifier" required />\n                </div>\n\n                <div class="break"></div>\n\n                <p><strong>{{\'Description\'|i18n:\'contenttypes\'}}:</strong><p>\n                <input class="box" ng-model="fieldtype.descriptions.value[0][\'#text\']" />\n\n                <p><strong>{{\'Features\'|i18n:\'contenttypes\'}}:</strong><p>\n                <p>\n                    <input class="inline" type="checkbox" ng-model="fieldtype.isRequired" /> <strong>{{\'Required\'|i18n:\'contenttypes\'}}</strong> &nbsp;&nbsp;\n                    <input class="inline" type="checkbox" ng-model="fieldtype.isSearchable" /> <strong>{{\'Searchable\'|i18n:\'contenttypes\'}}</strong> &nbsp;&nbsp;\n                    <input class="inline" type="checkbox" ng-model="fieldtype.isInfoCollector" /> <strong>{{\'Infocollector\'|i18n:\'contenttypes\'}}</strong> &nbsp;&nbsp;\n                    <input class="inline" type="checkbox" ng-model="fieldtype.isTranslatable" /> <strong>{{\'Translatable\'|i18n:\'contenttypes\'}}</strong> &nbsp;&nbsp;\n                </p>\n            </div>\n        </div>\n\n        <button class="right" ng-click="::close(false)">{{\'Cancel\'|i18n:\'contenttypes\'}}</button>\n        <button class="right" ng-click="::contenttype.publish()">{{\'Publish\'|i18n:\'contenttypes\'}}</button>\n\n        <select>\n            <option ng-repeat="fieldType in ::contenttype.FieldTypeList">{{fieldType|i18n:\'contenttypes\'}}</option>\n        </select>\n        <button class="leftt">Add field|i18n</button>\n\n        <div class="break"></div>\n    </div>\n    <div ng-click="::close(false)" id="modal-overlay-fade"></div>\n</form>'),a.put("contenttypes/contenttype/contenttype.view.html",'<button class="right" ng-click="::contenttype.showModalRemove()">{{\'Remove\'|i18n:\'contenttypes\'}}</button>\n<button class="right" ng-click="::contenttype.showModalUpdate()">{{\'Edit\'|i18n:\'contenttypes\'}}</button>\n<select class="right">\n    <option value="{{::contenttype.mainLanguageCode}}" selected>{{::contenttype.mainLanguageCode}}</option>\n</select>\n\n<h1 ng-if="contenttype.definition.names.value">{{contenttype.definition.names.value|translatevalue}}</h1>\n<p ng-if="contenttype.definition.descriptions.value">{{contenttype.definition.descriptions.value|translatevalue}}</p>\n\n<p>ToDo: modified, groups, status, translations, has access</p>\n\n'+"<h2>{{'Features'|i18n:'contenttypes'}}:</h2>\n\n<table>\n    <thead>\n        <tr>\n            <th>{{'Identifier'|i18n:'contenttypes'}}</th>\n            <th>{{'Id'|i18n:'contenttypes'}}</th>\n            <th>{{'Container'|i18n:'contenttypes'}}</th>\n            <th>{{'Default availablity'|i18n:'contenttypes'}}</th>\n            <th>{{'Default sort order'|i18n:'contenttypes'}}</th>\n            <th>{{'Object name schema'|i18n:'contenttypes'}}</th>\n        <tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>{{contenttype.definition.identifier}}</td>\n            <td>{{::contenttype.definition.id}}</td>\n            <td>{{contenttype.definition.isContainer|i18n:'contenttypes'}}</td>\n            <td>{{contenttype.definition.defaultAlwaysAvailable|i18n:'contenttypes'}}</td>\n            <td>{{contenttype.definition.defaultSortField}} {{contenttype.definition.defaultSortOrder}}</td>\n            <td>{{contenttype.definition.nameSchema}}</td>\n        </tr>\n    </tbody>\n</table>\n\n<h2>{{'Fields'|i18n:'contenttypes'}}:</h2>\n\n<table>\n    <thead>\n        <tr>\n            <th>{{'Id'|i18n:'contenttypes'}}</th>\n            <th>{{'Name'|i18n:'contenttypes'}}</th>\n            <th>{{'Identifier'|i18n:'contenttypes'}}</th>\n            <th>{{'Fieldtype'|i18n:'contenttypes'}}</th>\n            <th>{{'Requi'|i18n:'contenttypes'}}</th>\n            <th>{{'Searc'|i18n:'contenttypes'}}</th>\n            <th>{{'Infoc'|i18n:'contenttypes'}}</th>\n            <th>{{'Trans'|i18n:'contenttypes'}}</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat=\"fieldtype in contenttype.definition.FieldDefinitions.FieldDefinition\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n            <td>{{::fieldtype.id}}</td>\n            <td>{{fieldtype.names.value|translatevalue}}</td>\n            <td>{{fieldtype.identifier}}</td>\n            <td>{{fieldtype.fieldType|i18n:'contenttypes'}}</td>\n            <td>{{fieldtype.isRequired|i18n:'contenttypes'}}</td>\n            <td>{{fieldtype.isSearchable|i18n:'contenttypes'}}</td>\n            <td>{{fieldtype.isInfoCollector|i18n:'contenttypes'}}</td>\n            <td>{{fieldtype.isTranslatable|i18n:'contenttypes'}}</td>\n        </tr>\n    </tbody>\n</table>\n"),
a.put("contenttypes/contenttypes.html",'<button class="right" ng-click="::contenttypes.showModalCreate()">{{\'Create\'|i18n:\'contenttypes\'}}</button>\n<select class="right">\n    <option value="eng-GB" selected>eng-GB (ToDo!)</option>\n</select>\n<select class="right">\n    <option value="{{::contenttypes.groupId|contenttypegroupename}}" selected>{{::contenttypes.groupId|contenttypegroupename}} (ToDo!)</option>\n</select>\n\n<h1>\n'+"    {{'Contenttypes'|i18n:'contenttypes'}}\n    <span ng-if=\"::contenttypes.groupId\">{{'in group'|i18n:'contenttypes'}} {{::contenttypes.groupId|contenttypegroupename}}</span>\n</h1>\n\n<div class=\"break\"></div>\n<p></p>\n\n<table>\n    <thead>\n        <tr>\n            <th>{{'Name'|i18n:'contenttypes'}}</th>\n            <th>{{'Id'|i18n:'contenttypes'}}</th>\n            <th>{{'Identifier'|i18n:'contenttypes'}}</th>\n            <th>{{'Modified'|i18n:'contenttypes'}}</th>\n            <!--th>{{'Description'|i18n:'contenttypes'}}</th-->\n            <th>{{'Actions'|i18n:'contenttypes'}}</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat=\"contenttype in ::contenttypes.list\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\">\n            <td>\n                <a ng-href=\"{{::contenttypes.pathPrefix}}/contenttypes/type/{{::contenttype.id}}\">\n                    {{::contenttype.names.value|translatevalue}}\n                </a>\n            </td>\n            <td>{{::contenttype.id}}</td>\n            <td>{{::contenttype.identifier}}</td>\n            <td>{{::contenttype.modificationDate}}</td>\n            <!--td>{{::contenttype.descriptions.value|translatevalue}}</td-->\n            <td style=\"white-space: nowrap\">\n                <span class=\"pointer fa fa-pencil-square-o fa-lg fa-fw\" ng-click=\"::contenttypeGroups.editGroup(key)\"></span>\n                <span class=\"pointer fa fa-files-o fa-lg fa-fw\" ng-click=\"::contenttypeGroups.removeGroup(key)\"></span>\n                <span class=\"pointer fa fa-times fa-lg fa-fw\" ng-click=\"::contenttypeGroups.removeGroup(key)\"></span>\n            </td>\n        </tr>\n    </tbody>\n</table>\n"),a.put("contenttypes/groups/groupsmenubox.html",'<div class="ezp-contenttype-groups">\n    <ul>\n        <li>\n            <strong>\n                <a ng-href="{{::contenttypeGroups.pathPrefix}}/contenttypes">{{\'Show all contenttypes\'|i18n:\'contenttypes\'}}</a>\n            </strong>\n        </li>\n        <li ng-if="contenttypeGroups.groupList" ng-repeat="group in contenttypeGroups.groupList">\n            <span class="pointer fa fa-times fa-lg" ng-click="::contenttypeGroups.removeGroup(group.id)"></span>\n            <span class="pointer fa fa-pencil-square-o fa-lg" ng-click="::contenttypeGroups.editGroup(group.id)"></span>\n            <a ng-href="{{::contenttypeGroups.pathPrefix}}/contenttypes/group/{{group.id}}">{{group.identifier}}</a>\n        </li>\n    </ul>\n    <input style="width: 95%;margin: 0.5rem 0 0 0;" ng-model="contenttypeGroups.newGroupIdentifier" placeholder="{{\'New group identifier\'|i18n:\'contenttypes\'}}" />\n    <button style="width: 95%;margin-top: 0.5rem;" ng-click="::contenttypeGroups.createGroup()">\n'+"        {{'Add new group'|i18n:'contenttypes'}}\n    </button>\n</div>\n"),a.put("contenttypes/menu.html","<cjw-tool-box title=\"{{'Groups'|i18n:'contenttypes'}}\">\n    <ezp-contenttype-groups />\n</cjw-tool-box>\n"),a.put("login/login.html",'<img src="/bundles/cjwadminapp/images/logo-cjw.png" alt="CJW Logo">\n\n<h1>CJW Admin for eZ Publish/eZ Platform Demo</h1>\n\n<p>&nbsp;</p>\n<form id="loginpage">\n    <input type="text" ng-model="login.sessionInput.SessionInput.login" placeholder="Username"/>\n    <input type="password" ng-model="login.sessionInput.SessionInput.password" placeholder="Password"/>\n    <button ng-click="login.requestAuth()">LOG IN</button>\n</form>\n<p>&nbsp;</p>\n\n<p>Credentials are</p>\n<ul>\n    <li>Username: <code>admin</code></li>\n    <li>Password: <code>publish</code></li>\n</ul>\n\n<p><em>Please note: CJW Admin for eZ Publish/eZ Platform is a technology study only.</em></p>\n\n<p>The demo is reset every hour. Don\'t be afraid to play around.</p>\n\n<p>For further information visit <a href="https://github.com/cjw-network/CjwAdminBundle" target="_blank">https://github.com/cjw-network/CjwAdminBundle</a>. Collaborators are welcome!</p>\n\n<p>&copy; 2016-2017 CJW Network <a href="http://www.cjw-network.com">http://www.cjw-network.com</a></p>'),a.put("roles/menu.html","<cjw-tool-box title=\"{{'Roles'|i18n:'roles'}}\">\n    <ul>\n        <li>{{'Roles'|i18n:'roles'}}</li>\n    </ul>\n</cjw-tool-box>\n"),a.put("roles/roles.html",'<h1>roles</h1>\n\n<ul>\n    <li ng-repeat="role in ::roles.list">{{::role.identifier}}</li>\n</ul>'),a.put("setup/menu.html","<cjw-tool-box title=\"{{'Setup'|i18n:'setup'}}\">\n    <ul>\n        <li>{{'Cache'|i18n:'setup'}}</li>\n        <li>{{'Sections'|i18n:'setup'}}</li>\n        <li>{{'Languages'|i18n:'setup'}}</li>\n    </ul>\n</cjw-tool-box>\n"),a.put("setup/setup.html","<h1>setup</h1>\n"),a.put("ui/menutop.view.html",'<ul id="menutop" ng-if="menutop.appHasMenuTop">\n    <li ng-repeat="item in menutop.navigationParts">\n        <a ng-if="!item.self" class="color_red" ng-class="{\'underline\': $index==menutop.selectedItem}" ng-click="::menutop.selection($index,item)" ng-href="{{menutop.pathPrefix}}{{::item.href}}">{{::item.name|i18n:\'ui\'}}</a>\n        <a ng-if="::item.self" class="color_red" ng-href="{{::menutop.pathPrefix}}{{::item.href}}" target="_self">{{::item.name|i18n:\'ui\'}}</a>\n    </li>\n</ul>\n<div class="break"></div>\n'),a.put("ui/modal.layout.template.html",'<style type="text/css">\n    #modal-overlay-box {\n        position: fixed;\n        overflow: auto;\n        left: 5%;\n        top: 1%;\n        padding: 2em;\n        border: 1px solid black; border-radius: 3px;\n        background-color: #fefefe;\n        width: 90%;\n        height: 98%;\n        z-index: 100;\n        overflow-y: scroll;\n    }\n    #modal-overlay-fade {\n        position: fixed;\n        left: 0%;\n        top: 0%;\n        background-color: black;\n        -moz-opacity: 0.75;\n        opacity: .75;\n        filter: alpha(opacity=75);\n        width: 100%;\n        height: 100%;\n        z-index: 90;\n    }\n    #modal-overlay-box button { margin-bottom: 0.75em; }\n</style>\n')}]),angular.module("ezpAppCore").controller("ezpContentCtrl",["$scope","$routeParams","$route","$filter","$location","i18nContentService","settingsService","modalService","dataFactory","messagesFactory","cjwWebStorageService","accessFactory",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){k.set("ezpCurrentLocation",b),n.location=b;var f=b.ParentLocation._href,i=k.get("ezpRoot"),j=i.rootMediaFolder._href,m="todo";(f.indexOf(p)>-1||f.indexOf(j)>-1||f.indexOf(m)>-1)&&(n.parentLocation=b.ParentLocation._href);var o=f.split(g.get("appSettings").ezpRestApiUrl)[1];if(n.canContentCreate=!1,k.get("ezpCurrentContent").ContentType){var q={isContainer:b.canCreate,pathString:b.pathString,parentContentType:k.get("ezpCurrentContent").ContentType._href.split("/")[6]};n.canContentCreate=l.canContentCreate(q)}n.selectedContentCreateContentType=0,n.canContentEdit=b.canEdit;var r={canRemove:b.canRemove,pathString:b.pathString};n.canContentRemove=l.canContentRemove(r);var s={canMove:b.canMove,pathString:b.pathString};n.canContentMove=l.canContentMove(s),a.showModalEdit=function(){h.showModal({templateUrl:"content/objects/content.edit.modal.html",controller:"ezpContentEditCtrl as content",inputs:{modalParams:{parentLocationCacheKey:o}}}).then(function(a){a.close.then(function(a){a&&c.reload()})})},a.showModalCreate=function(){h.showModal({templateUrl:"content/objects/content.create.modal.html",controller:"ezpContentCreateCtrl as content",inputs:{modalParams:{pathStr:b.pathString.slice(0,-1),contentType:n.selectedContentCreateContentType}}}).then(function(a){a.close.then(function(a){a&&e.path(d("getapproute")(a))})})},a.showModalMove=function(){h.showModal({templateUrl:"content/locations/location.browse.modal.html",controller:"ezpLocationBrowseCtrl as location",inputs:{modalParams:{multiple:!1,action:"moveSubtree"}}}).then(function(a){a.close.then(function(a){})})},a.showModalRemove=function(){h.showModal({templateUrl:"content/objects/content.remove.modal.html",controller:"ezpContentRemoveCtrl as content",inputs:{modalParams:{parentLocationCacheKey:o}}}).then(function(a){a.close.then(function(a){a&&e.path(d("getapproute")(f))})})}}k.set("appHasSidebar",{status:"content"},!1,!0);var n=this;n.location={};var o,p=k.get("ezpRoot").rootLocation._href;o=b.locationId?b.locationId:p.split("/locations/")[1].replace(/\//g,"-");var q={url:"/content/locations/"+o.replace(/-/g,"/"),mediaType:"application/vnd.ez.api.Location"},r=q.url,s=!1;g.get("cacheSettings").locations&&(s=k.get(r)),s?m(s):i.request(q,!0).then(function(a){m(a.Location),k.set(r,a.Location)},function(a){j.pushHttpErrorCodeMessage(a.status,"locationLoadByPath")})}]),angular.module("ezpAppCore").controller("ezpContentSearchCtrl",["$routeParams","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d){d.set("appHasSidebar",{status:"content"},!1,!0);var e=this;e.searchHits=!1,e.totalCount=0;var f;a.searchString&&(f=a.searchString);var g={url:"/content/search/"+f};b.request(g,!0).then(function(a){e.searchHits=a.searchHits,e.totalCount=a.totalCount},function(a){c.pushHttpErrorCodeMessage(a.status,"general")})}]),angular.module("ezpAppCore").filter("contenttypename",["cjwWebStorageService",function(a){return function(b){return a.get("ezpContentTypeList")[b]}}]),angular.module("ezpAppCore").service("i18nContentService",["i18nService",function(a){var b={};b.en={true:"yes",false:"no",ARCHIVED:"Archived",PUBLISHED:"Published",DRAFT:"Draft"},b.de={Remove:"Löschen",Create:"Anlegen",Edit:"Bearbeiten",Move:"Verschieben","You are here":"Sie sind hier",Content:"Inhalte",Details:"Details",Versions:"Versionen",Locations:"Orte",Relations:"Verknüpfungen",Languages:"Sprachen",Extras:"Extras",Close:"Schließen",Publish:"Veröffentlichen",Select:"Auswählen",Name:"Name",Language:"Sprache",Hidden:"Versteckt",Section:"Sektion",Contentype:"Inhaltstyp",Modified:"Geändert",Published:"Veröffentlicht",Priority:"Priorität",true:"ja",false:"nein",Version:"Version",Status:"Status",Creator:"Ersteller",ARCHIVED:"Archiviert",PUBLISHED:"Veröffentlicht",DRAFT:"Entwurf",Location:"Ort",Children:"Kinder","Main location":"Hauptort","Remove location":"Ort entfernen","Add location":"Ort hinzufügen","Set main location":"Hauptort setzen","No relations set":"es sind keine Verknüpfungen vorhanden","Content structure":"Inhalts-Struktur","My settings":"Meine Einstellungen",Bookmarks:"Lesezeichen",Search:"Suche","Search in content":"in 'Inhalte' suchen",Multiupload:"Multiupload","Search content":"Inhalte suchen"},a.appendDictonary("content",b)}]),angular.module("ezpAppCore").controller("ezpLocationBrowseCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","cjwWebStorageService","settingsService",function(a,b,c,d,e,f,g,h){function i(a){var b=a._href.replace(h.get("appSettings").ezpRestApiUrl,""),c=!1;h.get("cacheSettings").locationChildren&&(c=g.get(b)),c?j(c):e.request(a,!1).then(function(a){j(a.LocationList),g.set(b,a.LocationList)},function(a){f.pushHttpErrorCodeMessage(a.status,"locationGetChildren")})}function j(a){k.hasChildren=a.Location.length,k.children=a.Location;var b=a._href.split("/"),c=b.splice(-2,1);k.parent={_href:b.join("/"),"_media-type":a["_media-type"]},"1"===c[0]&&(k.parent=!1)}var k=this;k.action=d.action,k.multiple=d.multiple,k.select={};var l=g.get("ezpCurrentLocation"),m={_href:l.ParentLocation._href+"/children","_media-type":l.ParentLocation["_media-type"].replace("Location","LocationList")};i(m),k.pathAssets=h.get("appSettings").pathAssets,k.requestLink=function(a){a&&i(a)},k.getLanguageCodes=function(a){return a.split(",")},b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)};var n=[];k.setLocationSelection=function(a){var b=k.children[a].selected,c=k.children[a]._href;if(!k.multiple){for(var d in k.children)k.children[d].selected=!1;n.length=0}if(b)n[n.length]=c,k.multiple||(k.children[a].selected=b);else if(k.multiple){var a=n.indexOf(c);a>-1&&n.splice(a,1)}},k.select.addLocation=function(){var b=n[0];if(b){var c=g.get("ezpCurrentContent"),d=angular.toJson({LocationCreate:{ParentLocation:{_href:b},priority:"0",hidden:"false",sortField:"PATH",sortOrder:"ASC"}}),h={method:"POST",url:"/content/objects/"+c._id+"/locations",mediaType:"application/vnd.ez.api.Location",contentType:"application/vnd.ez.api.LocationCreate",data:d};e.request(h,!0).then(function(c){a.close(b)},function(b){f.pushHttpErrorCodeMessage(b.status,"locationCreate"),a.close(!1)})}},k.select.moveSubtree=function(){var b=n[0];if(b){var c={method:"MOVE",url:l._href,headers:{Destination:b}};e.request(c,!1).then(function(c){g.remove("/content/locations"+l._href.split("/content/locations")[1]+"/children"),g.remove("/content/locations"+b.split("/content/locations")[1]+"/children"),a.close(!0)},function(b){f.pushHttpErrorCodeMessage(b.status,"subtreeMove"),a.close(!1)})}}}]),angular.module("ezpAppCore").controller("ezpLocationChildrenCtrl",["$scope","dataFactory","messagesFactory","cjwWebStorageService","settingsService",function(a,b,c,d,e){function f(a){a.Location.length>0&&(g.hasChildren=a.Location.length,g.locations=a.Location)}var g=this;g.location=[],g.hasChildren=!1,a.pathAssets=e.get("appSettings").pathAssets;var h=this.request._href.replace(e.get("appSettings").ezpRestApiUrl,""),i=!1;e.get("cacheSettings").locationChildren&&(i=d.get(h)),i?f(i):b.request(this.request).then(function(a){f(a.LocationList),d.set(h,a.LocationList)},function(a){c.pushHttpErrorCodeMessage(a.status,"locationGetChildren")}),a.getLanguageCodes=function(a){return a.split(",")}}]),angular.module("ezpAppCore").directive("ezpLocationChildren",[function(){return{scope:{},restrict:"E",templateUrl:"content/locations/location.children.html",controller:"ezpLocationChildrenCtrl",controllerAs:"children",bindToController:{request:"=request"}}}]),angular.module("ezpAppCore").controller("ezpLocationPathCtrl",["$timeout","$interval","cjwWebStorageService","settingsService","dataFactory","messagesFactory",function(a,b,c,d,e,f){function g(a,b){l=!1,d.get("cacheSettings").locations&&(l=c.get(a)),l?b(l):(h={url:a,mediaType:"application/vnd.ez.api.Location"},e.request(h,!0).then(function(d){c.set(a,d.Location),b(d.Location)},function(a){f.pushHttpErrorCodeMessage(a.status,"locationLoadByPath"),b(!1)}))}var h,i=this,j=this.pathstring.substring(1,this.pathstring.length-1).split("/"),k="/content/locations",l=!1,m=1;a(function(){var a={};for(var c in j)k=k+"/"+j[c],c>0&&g(k,function(b){m++,b&&(a[b._href]={path:b._href,name:b.name})});var d=b(function(){m===j.length&&(i.items=a,b.cancel(d))},250,10)},10)}]),angular.module("ezpAppCore").directive("ezpLocationPath",[function(){return{scope:{},restrict:"E",replace:!0,controller:"ezpLocationPathCtrl",controllerAs:"path",bindToController:{pathstring:"=pathstring"},template:'<span ng-repeat="pathItem in path.items">    <span ng-if="!$first" class="fa fa-caret-right "></span>    <a ng-href="{{pathItem.path|getapproute:location}}">{{pathItem.name}}</a></span>'}}]),angular.module("ezpAppCore").controller("ezpLocationRemoveCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory",function(a,b,c,d,e,f){b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},a.remove=function(){var b={method:"DELETE",url:d.locationPath};e.request(b).then(function(b){a.close(!0)},function(b){f.pushHttpErrorCodeMessage(b.status,"subtreeRemove"),a.close(!1)})}}]),angular.module("ezpAppCore").directive("cjwBookmarks",function(){return{restrict:"E",replace:!0,scope:{},template:'<div class="cjw-Bookmarks"><button ng-if="bookmarks.canBookmark" style="width: 95%;margin-bottom: 0.5rem;" ng-click="::bookmarks.addBookmark()">{{\'Add Bookmark\'|i18n:\'content\'}}</button><ul><li ng-repeat="(key,bookmark) in bookmarks.hasBookmarks"><span class="pointer fa fa-times" ng-click="::bookmarks.removeBookmark(key)"></span><a ng-href="{{key}}">{{bookmark}}</a></li></ul></div>',controllerAs:"bookmarks",controller:["$location","cjwWebStorageService",function(a,b){var c=this;c.hasBookmarks=b.get("bookmarks")||{},c.canBookmark=!0,c.addBookmark=function(){var d=b.get("ezpCurrentLocation").name;c.hasBookmarks[a.path()]=d,b.set("bookmarks",c.hasBookmarks,!0)},c.removeBookmark=function(a){delete c.hasBookmarks[a],b.set("bookmarks",c.hasBookmarks,!0)}}]}}),angular.module("ezpAppCore").directive("ezpSearchBox",function(){return{restrict:"E",replace:!0,scope:{},template:'<form id="ezp-search-box"><input style="width: 95%;margin: 0 0 0.5rem 0;" placeholder="{{\'Search in content\'|i18n:\'content\'}}" ng-model="searchbox.searchString" /><button style="width: 95%;" ng-click="searchbox.searchContent()">{{\'Search\'|i18n:\'content\'}}</button></form>',controllerAs:"searchbox",controller:["$location",function(a){var b=this;b.searchString="",b.searchContent=function(){a.path("/adminapp/contentsearch/"+b.searchString)}}]}}),angular.module("ezpAppCore").controller("ezpTreemenuCtrl",["$scope","$timeout","dataFactory","messagesFactory","cjwWebStorageService","settingsService",function(a,b,c,d,e,f){function g(a){j.rootNode={name:!1,request:a,href:a._href.replace("/children",""),active:!1,depth:1,count:1,children:[{}]},j.setNode=function(a,b,c){a.children[b].active?(a.children[b].active=!1,a.children[b].children=[]):(a.children[b].active=!0,h(c,function(c){a.children[b].children=c}))},b(function(){j.setNode(j.rootNode,0,j.rootNode.request)},10)}function h(a,b){var g=a._href.replace(f.get("appSettings").ezpRestApiUrl,""),h=!1;f.get("cacheSettings").locationChildren&&(h=e.get(g)),h?b(i(h)):c.request(a).then(function(a){e.set(g,a.LocationList),b(i(a.LocationList))},function(a){d.pushHttpErrorCodeMessage(a.status,"locationGetChildren")})}function i(a){var b,c,d=[];if(a.Location.length>0)for(var e in a.Location)c=a.Location[e]._href,b={_href:a.Location[e]._href+"/children","_media-type":a.Location[e]["_media-type"].replace("Location","LocationList")},d[d.length]={name:a.Location[e].name,request:b,href:c,active:!1,depth:c.split("/locations/")[1].split("/").length,count:a.Location[e].childCount,children:[]};return d}var j=this,k=f.get("appSettings").ezpRestApiUrl,l={"_media-type":"application/vnd.ez.api.LocationList+json",_href:k+"/content/locations/1/2/children"};l._href=k+"/content/locations/"+e.get("appCurNaviPart").href.split("/location/")[1].split("-").join("/")+"/children",g(l),a.$on("appCurNaviPart",function(a,b){var c=b.href;c.indexOf("/location/")>-1&&(l._href=k+"/content/locations/"+c.split("/location/")[1].split("-").join("/")+"/children",g(l))})}]),angular.module("ezpAppCore").controller("ezpContentCreateCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","contentoperationsService","cjwWebStorageService",function(a,b,c,d,e,f,g,h){function i(a){var b=a.FieldDefinitions.FieldDefinition;for(var c in b)j.fields[j.fields.length]={id:null,fieldDefinitionIdentifier:b[c].identifier,languageCode:"ger-DE",fieldTypeIdentifier:b[c].fieldType,isRequired:b[c].isRequired,isInfoCollector:b[c].isInfoCollector,defaultValue:b[c].defaultValue,fieldValue:null}}var j=this,k=d.contentType,l=d.pathStr;j.title=k,j.fields=[];var m="/content/types/"+k,n=m,o=h.get(n);o?i(o):e.request({url:m,mediaType:"application/vnd.ez.api.ContentType"},!0).then(function(a){i(a.ContentType),h.set(n,a.ContentType)},function(a){f.pushHttpErrorCodeMessage(a.status,"getContentType")}),b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},a.publish=function(){var b={contentTypeId:k,mainLanguageCode:"ger-DE",parentLocation:l,sectionId:"1"},c=g.getNewContentStruct(b),d=g.contentFieldTypeProcessor(j.fields);c.ContentCreate.fields.field=d;var i=angular.toJson(c),m={method:"POST",url:"/content/objects",mediaType:"application/vnd.ez.api.ContentInfo",contentType:"application/vnd.ez.api.ContentCreate",contentLength:i.length,data:i};e.request(m,!0).then(function(b){var c={method:"PUBLISH",url:"/content/objects/"+b.Content._id+"/versions/1"};e.request(c,!0).then(function(c){h.remove("/content/locations"+l+"/children"),h.remove("/content/locations"+l),e.request(b.Content.Locations).then(function(b){a.close(b.LocationList.Location[0]._href)},function(b){f.pushHttpErrorCodeMessage(b.status,"locationLoadByPath"),a.close(!1)})},function(b){f.pushHttpErrorCodeMessage(b.status,"contentPublishVersion"),a.close(!1)})},function(b){f.pushHttpErrorCodeMessage(b.status,"contentCreateDraft"),a.close(!1)})}}]),angular.module("ezpAppCore").controller("ezpContentEditCtrl",["$scope","$timeout","$filter","close","modalParams","dataFactory","messagesFactory","contentoperationsService","cjwWebStorageService",function(a,b,c,d,e,f,g,h,i){var j=this,k=i.get("ezpCurrentContent");j.id=k._id,j.remoteId=k._remoteId,j.name=k.Name,j.publishedDate=c("date")(k.publishedDate,"short"),j.lastModificationDate=c("date")(k.lastModificationDate,"short"),j.mainLanguageCode=k.mainLanguageCode,j.alwaysAvailable=k.alwaysAvailable,j.fields=k.CurrentVersion.Version.Fields.field,b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,d(b,450)},a.publish=function(){var b={method:"COPY",url:"/content/objects/"+j.id+"/currentversion",mediaType:"application/vnd.ez.api.Version"};f.request(b,!0).then(function(b){var c=b.Version.VersionInfo,d=h.contentFieldTypeProcessor(j.fields),k={VersionUpdate:{initialLanguageCode:"ger-DE",fields:{field:d}}},l={method:"PATCH",url:"/content/objects/"+j.id+"/versions/"+c.versionNo,mediaType:"application/vnd.ez.api.Version",contentType:"application/vnd.ez.api.VersionUpdate",data:k};f.request(l,!0).then(function(b){var d={method:"PUBLISH",url:"/content/objects/"+j.id+"/versions/"+c.versionNo};f.request(d,!0).then(function(b){i.remove(e.parentLocationCacheKey+"/children"),a.close(!0)},function(b){g.pushHttpErrorCodeMessage(b.status,"contentPublishVersion"),a.close(!1)})},function(b){g.pushHttpErrorCodeMessage(b.status,"contentUpdateVersion"),a.close(!1)})},function(b){g.pushHttpErrorCodeMessage(b.status,"contentCreateDraftFromCurrentVersion"),a.close(!1)})}}]),angular.module("ezpAppCore").controller("ezpContentRemoveCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f,g){var h=this,i=g.get("ezpCurrentContent");h.id=i._id,b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},a.remove=function(){var b={method:"DELETE",url:"/content/objects/"+h.id};e.request(b,!0).then(function(b){g.remove(d.parentLocationCacheKey+"/children"),a.close(!0)},function(b){f.pushHttpErrorCodeMessage(b.status,"contentRemove"),a.close(!1)})}}]),angular.module("ezpAppCore").controller("ezpContentViewCtrl",["$filter","$timeout","modalService","dataFactory","messagesFactory","cjwWebStorageService","settingsService",function(a,b,c,d,e,f,g){function h(c){j.request={url:c._href,mediaType:c["_media-type"]},j.id=c._id,j.remoteId=c._remoteId,j.name=c.Name,j.publishedDate=a("date")(c.publishedDate,"short"),j.lastModificationDate=a("date")(c.lastModificationDate,"short"),j.mainLanguageCode=c.mainLanguageCode,j.alwaysAvailable=c.alwaysAvailable,j.VersionInfo=c.CurrentVersion.Version.VersionInfo,j.Fields=c.CurrentVersion.Version.Fields.field,j.MainLocationHref=c.MainLocation._href,j.requestLocations=c.Locations,j.requestRelations=c.CurrentVersion.Version.Relations,j.requestVersions=c.Versions,b(function(){i(j.requestLocations,"LocationList"),i(j.requestRelations,"Relations"),i(j.requestVersions,"VersionList")},1e3),j.updateLanguageVersion=function(a){j.currentLanguageCode=a;var b={url:j.request.url+"?languages="+a,mediaType:j.request.mediaType};d.request(b).then(function(a){h(a.Content),f.set("ezpCurrentContent",a.Content)},function(a){e.pushHttpErrorCodeMessage(a.status,"contentLoadById")})}}function i(a,b){var c=a._href.replace(g.get("appSettings").ezpRestApiUrl,""),h=!1;g.get("cacheSettings").objectProperties&&(h=f.get(c)),h?j[b]=h:d.request(a).then(function(a){j[b]=a[b],f.set(c,a[b])},function(a){e.pushHttpErrorCodeMessage(a.status,"general")})}var j=this;j.currentLanguageCode=this.language;var k={url:this.request._href+"?languages="+this.language,mediaType:this.request["_media-type"]};d.request(k).then(function(a){h(a.Content),f.set("ezpCurrentContent",a.Content)},function(a){e.pushHttpErrorCodeMessage(a.status,"contentLoadById")}),j.showModalBrowseLocations=function(){c.showModal({templateUrl:"content/locations/location.browse.modal.html",controller:"ezpLocationBrowseCtrl as location",inputs:{modalParams:{multiple:!1,action:"addLocation"}}}).then(function(a){a.close.then(function(a){a&&(f.remove(j.requestLocations._href.replace(g.get("appSettings").ezpRestApiUrl,"")),i(j.requestLocations,"LocationList"))})})},j.showModalRemoveLocation=function(){l.length>0&&c.showModal({templateUrl:"content/locations/location.remove.modal.html",controller:"ezpLocationRemoveCtrl as location",inputs:{modalParams:{locationPath:l[0]}}}).then(function(a){a.close.then(function(a){a&&(f.remove(j.requestLocations._href.replace(g.get("appSettings").ezpRestApiUrl,"")),i(j.requestLocations,"LocationList"))})})};var l=[];j.setLocationSelection=function(a){var b=j.LocationList.Location[a].selected,c=j.LocationList.Location[a]._href;if(!j.multiple){for(var d in j.LocationList.Location)j.LocationList.Location[d].selected=!1;l.length=0}if(b)l[l.length]=c,j.multiple||(j.LocationList.Location[a].selected=b);else if(j.multiple){var a=l.indexOf(c);a>-1&&l.splice(a,1)}},j.locationRemove=function(){var a=l[0],b={method:"DELETE",url:a};d.request(b).then(function(a){i(j.requestLocations,"LocationList")},function(a){e.pushHttpErrorCodeMessage(a.status,"subtreeRemove")})},j.locationSetMain=function(){}}]),angular.module("ezpAppCore").directive("ezpContentView",[function(){return{scope:{},restrict:"E",templateUrl:"content/objects/content.view.html",controller:"ezpContentViewCtrl",controllerAs:"content",bindToController:{request:"=request",parent:"=parent",language:"=language"}}}]),angular.module("ezpAppCore").factory("contentoperationsService",["settingsService","ezxmlService",function(a,b){var c={};return c.getNewContentStruct=function(b){var c=a.get("appSettings").ezpRestApiUrl,d={ContentCreate:{ContentType:{_href:c+"/content/types/"+b.contentTypeId},Section:{_href:c+"/content/sections/"+b.sectionId},mainLanguageCode:b.mainLanguageCode,LocationCreate:{ParentLocation:{_href:c+"/content/locations"+b.parentLocation},hidden:"false",sortField:"PATH",sortOrder:"ASC"},fields:{field:[]}}};return d},c.contentFieldTypeProcessor=function(a){var c,d=[];for(var e in a)null!==a[e].fieldValue&&(c=angular.copy(a[e]),"ezxmltext"===a[e].fieldTypeIdentifier?c.fieldValue.xml=b.getEzxmlFromHtml(c.fieldValue.xml):"ezimage"===a[e].fieldTypeIdentifier?0===c.fieldValue.fileSize&&(c.fieldValue=null):"ezdatetime"===a[e].fieldTypeIdentifier&&(""===c.fieldValue.internal?c.fieldValue=null:(c.fieldValue.timestamp=Math.round(Date.parse(c.fieldValue.internal)/1e3)+43200,delete c.fieldValue.rfc850,delete c.fieldValue.internal)),d[d.length]=c);return d},c}]),angular.module("ezpAppCore").factory("ezxmlService",[function(){var a={};return a.getHtmlFromEzxml=function(a){var b="";return"undefined"!=typeof a&&(a=a.replace('<?xml version="1.0"?>',""),a=a.replace('<?xml version="1.0" encoding="utf-8"?>',""),a=a.replace(/<(|\/)literal(|[^>]*)>/g,""),a=a.replace(/<br \/>/g,""),a=a.replace(/<header><strong>/g,"<h2>"),a=a.replace(/<\/strong><\/header>/g,"</h2>"),a=a.replace(/<paragraph(|[^>]*)><table(|[^>]*)>/g,"<table$2>"),a=a.replace(/<\/table><\/paragraph>/g,"</table>"),a=a.replace(/<td(|[^>]*)><paragraph(|[^>]*)>/g,"<td>"),a=a.replace(/<\/paragraph><\/td>/g,"</td>"),a=a.replace(/<li(|[^>]*)><paragraph(|[^>]*)>/g,"<li>"),a=a.replace(/<(|\/)literal(|[^>]*)>/g,"<$1pre$2>"),a=a.replace(/<(|\/)emphasize(|[^>]*)>/g,"<$1em$2>"),a=a.replace(/<link target="([^"]*)" url="([^"]*)">/g,'<link target="$1" href="$2">'),a=a.replace(/<(|\/)link/g,"<$1a"),a=a.replace(/<\/paragraph><\/li>/g,"</li>"),a=a.replace(/<(|\/)paragraph(|[^>]*)>/g,"<$1p>"),a=a.replace(/<(|\/)section(|[^>]*)>/g,""),b=a.trim(),a=a.replace(/\n/g,"<br />")),b},a.getEzxmlFromHtml=function(a){a=a.trim(),a=a.replace("/<br(|[^>]*)>/g","\n"),a=a.trim();var b='<?xml version="1.0" encoding="utf-8"?><section xmlns:custom="http://ez.no/namespaces/ezpublish3/custom/" xmlns:image="http://ez.no/namespaces/ezpublish3/image/" xmlns:xhtml="http://ez.no/namespaces/ezpublish3/xhtml/"><literal>'+a+"</literal></section>";return b.trim()},a}]),angular.module("ezpAppCore").filter("ezxml2html",["ezxmlService",function(a){return function(b){return a.getHtmlFromEzxml(b)}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzboolean",[function(){return{scope:!1,restrict:"E",template:'<input type="checkbox" ng-model="field.fieldValue" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzboolean",[function(){return{scope:!1,restrict:"E",template:'<input type="checkbox" ng-bind="::field.fieldValue" disabled="disabled" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzdatetime",[function(){return{scope:!1,restrict:"E",template:'<datepicker class="halfbox" date-set="{{::dateSet}}" date-format="mediumDate"><input type="text" class="box datepicker-input" ng-model="field.fieldValue.internal" placeholder=" Choose a date" ng-required="::field.isRequired" /></datepicker>',controller:["$scope","$filter",function(a,b){null!==a.field.fieldValue?(a.field.fieldValue.internal=angular.copy(b("date")(1e3*a.field.fieldValue.timestamp,"mediumDate")),a.dateSet=a.field.fieldValue.internal):a.field.fieldValue={timestamp:"",rfc850:"",internal:""}}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzdatetime",[function(){return{scope:!1,restrict:"E",template:'<p ng-if="::field.fieldValue" ng-bind="::field.fieldValue.timestamp*1000|date:mediumDate"></p>'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzimage",[function(){return{scope:!1,restrict:"E",template:'<table><tr><td><img ng-if="imgSrc" ng-src="{{imgSrc}}" style="max-height: 320px; max-width: 70%;" /></td><td><p><input class="box" ng-model="field.fieldValue.alternativeText" placeholder="alternative text" /></p><p ng-if="field.fieldValue.fileName" ng-bind="field.fieldValue.fileName"></p><p ng-if="field.fieldValue.fileSize" ng-bind="field.fieldValue.fileSize"></p><!--p ng-if="field.fieldValue.width" ng-bind="field.fieldValue.width"></p><p ng-if="field.fieldValue.height" ng-bind="field.fieldValue.height"></p--></td></tr><tr><td colspan="2"><div class="box" cjw-file-reader-input="file"></div></td></tr></table>',controller:["$scope","cjwFileReaderService",function(a,b){null!==a.field.fieldValue?(a.imgSrc=a.field.fieldValue.uri,a.field.fieldValue.inputUri=a.field.fieldValue.uri.slice(1),delete a.field.fieldValue.variations):(a.imgSrc=!1,a.field.fieldValue={alternativeText:"",fileName:"",fileSize:0,data:null}),a.readFile=function(){b.readAsDataUrl(a.file,a).then(function(b){a.imgSrc=b,a.field.fieldValue.data=b.split(",")[1],a.field.fieldValue.fileSize=a.file.size,a.field.fieldValue.fileName=a.file.name,a.field.fieldValue.uri&&(delete a.field.fieldValue.id,delete a.field.fieldValue.path,delete a.field.fieldValue.imageId,delete a.field.fieldValue.uri,delete a.field.fieldValue.inputUri,delete a.field.fieldValue.width,delete a.field.fieldValue.height)})}}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzimage",[function(){return{scope:!1,restrict:"E",template:'<div style="width: 30%;float: left;"><p ng-bind="::field.fieldValue.fileName"></p><p ng-bind="::field.fieldValue.alternativeText"></p></div><img style="max-height: 240px; max-width: 65%;" ng-if="imgVarUri" ng-src="{{imgVarUri}}" /><div class="break"></div>',controller:["$scope","$timeout","settingsService","dataFactory",function(a,b,c,d){
var e=c.get("appSettings").defaultImageVariation||!1;a.imgVarUri=!1,b(function(){var b=a.field.fieldValue;if(b)for(var c in b.variations)c===e&&d.request({url:b.variations[c].href}).then(function(b){a.imgVarUri=b.ContentImageVariation.uri},function(c){a.imgVarUri=b.uri})},0)}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzkeyword",[function(){return{scope:!1,restrict:"E",template:'<input class="box" ng-model="field.fieldValue" disabled="disabled" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzkeyword",[function(){return{scope:!1,restrict:"E",template:'<p ng-bind="::field.fieldValue"></p>'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzobjectrelationlist",[function(){return{scope:!1,restrict:"E",template:'<input class="box" ng-model="field.fieldValue.destinationContentIds" disabled="disabled" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzobjectrelationlist",[function(){return{scope:!1,restrict:"E",template:'<p ng-if="::field.fieldValue.destinationContentIds" ng-bind="::field.fieldValue.destinationContentIds"></p>'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzpage",[function(){return{scope:!1,restrict:"E",template:'<textarea class="box" ng-bind="zones" placeholder="zones" disabled="disabled"></textarea>',controller:["$scope",function(a){a.zones=angular.toJson(a.field.fieldValue.zones)}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzpage",[function(){return{scope:!1,restrict:"E",template:'<p>Layout|i18n: {{::ezpage.layout}}</p><p ng-repeat="zone in ::ezpage.zones"><ul><li>identifier: {{ezpage.zones[$index].identifier}}</li><li ng-repeat="block in ezpage.zones[$parent.$index].blocks">{{ btoJson(ezpage.zones[$parent.$index].blocks[$index]) }}</li></ul></p>',controller:["$scope",function(a){a.ezpage=a.field.fieldValue,a.btoJson=function(a){return angular.toJson(a)}}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzstring",[function(){return{scope:!1,restrict:"E",template:'<input class="box" ng-model="field.fieldValue" ng-required="::field.isRequired" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzstring",[function(){return{scope:!1,restrict:"E",template:'<p ng-bind="::field.fieldValue"></p>'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzurl",[function(){return{scope:!1,restrict:"E",template:'<input class="box" ng-model="field.fieldValue.link" placeholder="link" /><input class="box" ng-model="field.fieldValue.text" placeholder="text" />'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzurl",[function(){return{scope:!1,restrict:"E",template:'<p ng-bind="::field.fieldValue.link"></p><p ng-bind="::field.fieldValue.text"></p>'}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzuser",[function(){return{scope:!1,restrict:"E",template:'<input class="halfbox inline" ng-model="field.fieldValue.login" placeholder="Login" /><input class="halfbox inline" ng-model="field.fieldValue.email" placeholder="Email" /></p><p>Enabled: <input class="inline" type="checkbox" ng-model="field.fieldValue.enabled" /></p>',controller:["$scope",function(a){console.log(a.field.fieldValue)}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzuser",[function(){return{scope:!1,restrict:"E",template:"<p>Login: {{::field.fieldValue.login}}</p><p>Email: {{::field.fieldValue.email}}</p><p>Enabled: {{::field.fieldValue.enabled}}</p>",controller:["$scope",function(a){console.log(a.field.fieldValue)}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueEditEzxmltext",[function(){return{scope:!1,restrict:"E",template:'<textarea class="box" ng-wig="field.fieldValue.xml" source-mode-allowed></textarea><div class="break" style="margin-bottom: 1em"></div>',controller:["$scope","$timeout","ezxmlService",function(a,b,c){null!==a.field.fieldValue?b(function(){a.field.fieldValue.xml=c.getHtmlFromEzxml(a.field.fieldValue.xml)},0):a.field.fieldValue={xml:""}}]}}]),angular.module("ezpAppCore").directive("ezpFieldvalueViewEzxmltext",[function(){return{scope:!1,restrict:"E",template:'<div ng-bind-html="::field.fieldValue.xml|trusthtml"></div>',controller:["$scope","$timeout","ezxmlService",function(a,b,c){b(function(){a.field.fieldValue.xml=c.getHtmlFromEzxml(angular.copy(a.field.fieldValue.xml))},0)}]}}]),angular.module("ezpAppCore").directive("cjwFileReaderInput",["$parse",function(a){return{restrict:"A",template:'<input class="p" type="file" on-change="readFile()" />',replace:!0,link:function(b,c,d){var e=a(d.cjwFileReaderInput),f=e.assign,g=a(d.onChange),h=function(){b.$apply(function(){f(b,c[0].files[0]),g(b)})};c.bind("change",h)}}}]),angular.module("ezpAppCore").factory("cjwFileReaderService",["$q",function(a){var b=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},c=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},d=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},e=function(a,e){var f=new FileReader;return f.onload=b(f,a,e),f.onerror=c(f,a,e),f.onprogress=d(f,e),f},f=function(b,c){var d=a.defer(),f=e(d,c);return f.readAsDataURL(b),d.promise};return{readAsDataUrl:f}}]),angular.module("ezpAppCore").filter("trusthtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("ezpAppCore").filter("sectionname",["cjwWebStorageService",function(a){return function(b){return a.get("ezpSectionList")[b][1]}}]),angular.module("ezpAppCore").controller("ezpContenttypeCreateCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f,g){b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},a.publish=function(){({method:"COPY",url:"/content/objects/"+content.id+"/currentversion",mediaType:"application/vnd.ez.api.Version"})}}]),angular.module("ezpAppCore").controller("ezpContenttypeRemoveCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f,g){b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},a.remove=function(){}}]),angular.module("ezpAppCore").controller("ezpContenttypeUpdateCtrl",["$scope","$timeout","close","modalParams","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f,g){function h(b){var c={ContentTypeUpdate:{identifier:k.definition.identifier,mainLanguageCode:k.definition.mainLanguageCode,urlAliasSchema:k.definition.urlAliasSchema,nameSchema:k.definition.nameSchema,isContainer:k.definition.isContainer.toString(),defaultSortField:k.definition.defaultSortField,defaultSortOrder:k.definition.defaultSortOrder,defaultAlwaysAvailable:k.definition.defaultAlwaysAvailable.toString(),names:{value:k.definition.names.value},descriptions:{value:[{_languageCode:k.definition.mainLanguageCode,"#text":k.definition.descriptions.value[0]["#text"]}]}}},d={method:"POST",url:"/content/types/"+k.definition.id,contentType:"application/vnd.ez.api.ContentTypeUpdate",data:angular.toJson(c)};e.request(d,!0).then(function(a){b&&b()},function(b){f.pushHttpErrorCodeMessage(b.status,"general"),a.close(!1)})}function i(){var a={method:"PUBLISH",url:"/content/types/"+k.definition.id+"/draft",mediaType:"application/vnd.ez.api.ContentType"};e.request(a,!0).then(function(a){},function(a){f.pushHttpErrorCodeMessage(a.status,"general")})}function j(a){var b,c=0,d=k.definition.FieldDefinitions.FieldDefinition;for(var f in d){b={FieldDefinitionUpdate:{identifier:d[f].identifier,fieldGroup:d[f].fieldGroup,position:d[f].position.toString(),fieldType:d[f].fieldType,defaultValue:d[f].defaultValue,isTranslatable:d[f].isTranslatable.toString(),isRequired:d[f].isRequired.toString(),isInfoCollector:d[f].isInfoCollector.toString(),isSearchable:d[f].isSearchable.toString(),fieldSettings:d[f].fieldSettings,validatorConfiguration:d[f].validatorConfiguration,names:d[f].names,descriptions:d[f].descriptions}},"ezxmltext"===d[f].fieldType&&(b.FieldDefinitionUpdate.defaultValue={xml:null});var g={method:"PATCH",url:"/content/types/"+k.definition.id+"/draft/fieldDefinitions/"+d[f].id,contentType:"application/vnd.ez.api.FieldDefinitionUpdate",data:angular.toJson(b)};e.request(g,!0).then(function(b){c++,c===d.length&&a()},function(b){c++,c===d.length&&a()})}}var k=this;k.fieldsInactive={},k.FieldTypeList=g.get("ezpFieldTypeList"),k.definition=g.get("ezpCurrentContentType"),b(function(){a.animate=!0},50),a.close=function(b){a.animate=!1,c(b,450)},k.fieldHide=function(a){k.fieldsInactive[a]?k.fieldsInactive[a]=!1:k.fieldsInactive[a]=!0},k.fieldsCollapseExpand=function(a){for(var b in k.definition.FieldDefinitions.FieldDefinition)k.fieldsInactive[k.definition.FieldDefinitions.FieldDefinition[b].id]=a},k.publish=function(){function b(){h(function(){j(function(){i(),a.close(!0)})})}var c={method:"DELETE",url:"/content/types/"+k.definition.id+"/draft"};e.request(c,!0).then(function(a){b()},function(a){b()})}}]),angular.module("ezpAppCore").controller("ezpContentTypeViewCtrl",["$routeParams","i18nContenttypesService","dataFactory","messagesFactory","cjwWebStorageService","settingsService","modalService",function(a,b,c,d,e,f,g){function h(){var b={"_media-type":"application/vnd.ez.api.ContentTypeInfoList+json",_href:f.get("appSettings").ezpRestApiUrl+"/content/types/"+a.contentTypeId};c.request(b).then(function(a){i.definition=a.ContentType,i.mainLanguageCode=a.ContentType.mainLanguageCode,e.set("ezpCurrentContentType",a.ContentType)},function(a){d.pushHttpErrorCodeMessage(a.status,"general")})}e.set("appHasSidebar",{status:"contenttypes"},!1,!0);var i=this;i.location={},h(),i.showModalUpdate=function(){g.showModal({templateUrl:"contenttypes/contenttype/contenttype.update.modal.html",controller:"ezpContenttypeUpdateCtrl as contenttype",inputs:{modalParams:{}}}).then(function(a){a.close.then(function(a){a&&h()})})},i.showModalRemove=function(){g.showModal({templateUrl:"contenttypes/contenttype/contenttype.remove.modal.html",controller:"ezpContenttypeRemoveCtrl as contenttype",inputs:{modalParams:{}}}).then(function(a){a.close.then(function(a){})})}}]),angular.module("ezpAppCore").directive("ezpFielddefinationEditEzstring",[function(){return{scope:!1,restrict:"E",template:'<input class="box" ng-model="field.fieldValue" ng-required="::field.isRequired" />'}}]),angular.module("ezpAppCore").controller("ezpContentTypesCtrl",["$routeParams","i18nContenttypesService","dataFactory","messagesFactory","cjwWebStorageService","settingsService","modalService",function(a,b,c,d,e,f,g){e.set("appHasSidebar",{status:"contenttypes"},!1,!0);var h=this;h.location={},h.pathPrefix=f.get("appSettings").pathPrefix;var i,j={"_media-type":"application/vnd.ez.api.ContentTypeInfoList+json",_href:f.get("appSettings").ezpRestApiUrl+"/content/types"};a.contentTypeGroupId&&(i=a.contentTypeGroupId,h.groupId=i,j._href=f.get("appSettings").ezpRestApiUrl+"/content/typegroups/"+i+"/types"),c.request(j).then(function(a){h.list=a.ContentTypeInfoList.ContentType},function(a){d.pushHttpErrorCodeMessage(a.status,"general")}),h.showModalCreate=function(){g.showModal({templateUrl:"contenttypes/contenttype/contenttype.create.modal.html",controller:"ezpContenttypeCreateCtrl as contenttype",inputs:{modalParams:{}}}).then(function(a){a.close.then(function(a){})})}}]),angular.module("ezpAppCore").filter("contenttypegroupename",["cjwWebStorageService",function(a){return function(b){var c=a.get("/content/typegroups");return c=!(!c||!c.hasOwnProperty(b))&&c[b].identifier}}]),angular.module("ezpAppCore").directive("ezpContenttypeGroups",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"contenttypes/groups/groupsmenubox.html",controllerAs:"contenttypeGroups",controller:["messagesFactory","dataFactory","settingsService","cjwWebStorageService",function(a,b,c,d){function e(){var c=d.get(h);c?f.groupList=c:b.request(g).then(function(a){var b={},c=a.ContentTypeGroupList.ContentTypeGroup;for(var e in c)b[c[e].id]=c[e];f.groupList=b,d.set(h,b)},function(b){a.pushHttpErrorCodeMessage(b.status,"general")})}var f=this;f.groupList=!1,f.pathPrefix=c.get("appSettings").pathPrefix,f.newGroupIdentifier="";var g={"_media-type":"application/vnd.ez.api.ContentTypeGroupList+json",_href:c.get("appSettings").ezpRestApiUrl+"/content/typegroups"},h=g._href.replace(c.get("appSettings").ezpRestApiUrl,"");e(),f.createGroup=function(){if(""!==f.newGroupIdentifier){var c=angular.toJson({ContentTypeGroupInput:{identifier:f.newGroupIdentifier}}),g={method:"POST",url:"/content/typegroups",mediaType:"application/vnd.ez.api.ContentTypeGroup",contentType:"application/vnd.ez.api.ContentTypeGroupInput",data:c};b.request(g,!0).then(function(a){d.remove(h),f.newGroupIdentifier="",e()},function(b){a.pushHttpErrorCodeMessage(b.status,"general")})}},f.removeGroup=function(c){var g={method:"DELETE",url:"/content/typegroups/"+c};b.request(g,!0).then(function(a){d.remove(h),f.newGroupIdentifier="",e()},function(b){a.pushHttpErrorCodeMessage(b.status,"general")})},f.editGroup=function(a){}}]}}),angular.module("ezpAppCore").service("i18nContenttypesService",["i18nService",function(a){var b={};b.de={true:"ja",false:"nein",ezauthor:"Autoren",ezbinaryfile:"Datei",ezboolean:"Kontrollkästchen",ezcountry:"Land",ezdate:"Datum",ezdatetime:"Datum und Zeit",ezemail:"E-Mail",ezenum:"",ezfloat:"Fließkommawert",ezidentifier:"Bezeichner",ezimage:"Bild",ezinisetting:"Ini Einstellung",ezinteger:"Ganzzahl",ezisbn:"ISBN",ezkeyword:"Schlüsselwörter",ezmatrix:"Matrix",ezmedia:"Mediendatei",ezmultioption:"Mehrfachoption",ezmultioption2:"Mehrfachoption 2",ezmultiprice:"Multi-Preis",ezobjectrelation:"Objekt Verknüpfung",ezobjectrelationlist:"Objekt Vernüpfungsliste",ezoption:"Option",ezpackage:"Paket",eztags:"Schlagwörter",ezpage:"Layout",ezprice:"Preis",ezproductcategory:"Produkt Kategorie",ezrangeoption:"Wertebereich Option",ezrichtext:"Richtext",ezselection:"Auswahlliste",ezstring:"Textzeile",ezsubtreesubscription:"Abonnement des Zweiges",eztext:"Textabschnitt",eztime:"Zeit",ezurl:"URL",ezuser:"Benutzerkonto",ezxmltext:"XML Block","Show all contenttypes":"Alle Content-Typen anzeigen","New group identifier":"Neuer Gruppen Bezeichner","Add new group":"Neue Gruppe hinzufügen",Contenttypes:"Content-Typen",Fields:"Felder",Groups:"Gruppen",Features:"Merkmale",Name:"Name",Description:"Beschreibung",Modified:"Geändert",Id:"Id",Identifier:"Bezeichner",Container:"Behälter","Default availablity":"Standard Verfügbarkeit","Default sort order":"Standard Sortierung","Object name schema":"Objekt Namens Schema",Actions:"Aktionen",Remove:"Löschen",Create:"Anlegen",Edit:"Bearbeiten",Publish:"Veröffentlichen",Cancel:"Abbrechen"},b.en={true:"yes",false:"no"},a.appendDictonary("contenttypes",b)}]),angular.module("ezpAppCore").filter("translatevalue",["settingsService",function(a){return function(b){var c=b[0]["#text"];for(var d in b)if(b[d]._languageCode===a.get("appSettings").defaultLanguage[0]){c=b[d]["#text"];break}return c}}]),angular.module("ezpAppCore").controller("ezpLoginCtrl",["$cookies","$location","cjwWebStorageService","settingsService","dataFactory",function(a,b,c,d,e){var f=this;c.set("appHasMenuTop",{status:"off"},!1,!0);var g=a.getAll();for(var h in g)a.remove(h);var i={url:"/",mediaType:"application/vnd.ez.api.Root"};e.request(i,!0).then(function(a){c.set("ezpRoot",a.Root),f.sessionInput={SessionInput:{login:"",password:""}},f.requestAuth=function(){angular.extend(a.Root.createSession,{method:"POST",contentType:"application/vnd.ez.api.SessionInput+json",data:angular.toJson(f.sessionInput)}),e.request(a.Root.createSession).then(function(a){var f=a.Session.User._href.split("/")[6];e.request({url:"/user/loggedin/"+f,mediaType:"application/vnd.ez.api.PolicyList"},!0).then(function(e){c.set("ezpSession",a.Session),c.set("ezpUser",e.User),c.set("ezpAccess",e.Access),c.set("ezpSectionList",e.Sections),c.set("ezpFieldTypeList",e.FieldTypes),c.set("ezpContentTypeList",e.ContentTypes),c.set("ezpSettings",e.Settings),c.set("appCurNaviPart",e.Settings.cjwadminapp_navigationparts.location_content),c.set("appHasMenuTop",{status:"on"},!1,!0),b.path(d.get("appSettings").pathPrefix+d.get("appSettings").pathHome)})})}})}]),angular.module("ezpAppCore").service("i18nRolesService",["i18nService",function(a){var b={};b.en={},b.de={Roles:"Rollen"},a.appendDictonary("roles",b)}]),angular.module("ezpAppCore").controller("ezpRolesCtrl",["$scope","$rootScope","$routeParams","i18nRolesService","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f,g){function h(a){i.list=a.Role}g.set("appHasSidebar",{status:"roles"},!1,!0);var i=this;i.location={};var j;c.rolesId&&(j=c.rolesId);var k={url:"/user/roles",mediaType:"application/vnd.ez.api.RoleList"},l=!1;l?h(l):e.request(k,!0).then(function(a){h(a.RoleList)},function(a){f.pushHttpErrorCodeMessage(a.status,"roleList")})}]),angular.module("ezpAppCore").service("i18nSetupService",["i18nService",function(a){var b={};b.en={},b.de={Setup:"Setup",Cache:"Cache löschen",Sections:"Sektionen",Languages:"Sprachen"},a.appendDictonary("setup",b)}]),angular.module("ezpAppCore").controller("ezpSetupCtrl",["$scope","$routeParams","i18nSetupService","dataFactory","messagesFactory","cjwWebStorageService",function(a,b,c,d,e,f){function g(a){}f.set("appHasSidebar",{status:"setup"},!1,!0);a.$on("appCurNaviPart",function(a,b){var c={url:b.rest_route},h=!1,i=c.url;h=f.get(i),h=!1,h?g(h):d.request(c,!0).then(function(a){g(a.Setup),f.set(i,a.Setup)},function(a){e.pushHttpErrorCodeMessage(a.status,"general")})})}]),angular.module("ezpAppCore").factory("accessFactory",["cjwWebStorageService",function(a){function b(a,b,c){return c.indexOf(a)===b}function c(a,c){var d=!1,e=[];for(var f in a){var g=!0,h=a[f].policies;if(a[f].hasOwnProperty("SubtreeLimitation")){g=!1;for(var i in a[f].SubtreeLimitation)if(c.pathString.indexOf(a[f].SubtreeLimitation[i])>-1){g=!0;break}}if(g)for(var j in h){if(g=!0,h[j].hasOwnProperty("ParentContentTypeLimitation")){g=!1;for(var i in h[j].ParentContentTypeLimitation)if(c.pathString.indexOf(h[j].ParentContentTypeLimitation[i])>-1){g=!0;break}}g&&h[j].hasOwnProperty("ContentTypeLimitation")&&(e=e.concat(h[j].ContentTypeLimitation))}}return e.length>0&&(d=e.filter(b)),d}var d={};return d.canContentMove=function(a){var b=!1;return"/1/2/"!==a.pathString&&"/1/5/"!==a.pathString&&"/1/43/"!==a.pathString&&(b=a.canMove),b},d.canContentRemove=function(a){var b=!1;return"/1/2/"!==a.pathString&&"/1/5/"!==a.pathString&&"/1/43/"!==a.pathString&&(b=a.canRemove),b},d.canContentCreate=function(b){var d=!1;return b.isContainer&&(d=c(a.get("ezpAccess").ContentCreate,b)),d},d}]),angular.module("ezpAppCore").factory("cjwWebStorageService",["$rootScope","$window","$timeout",function(a,b,c){var d="ezpApp:",e={};e.has=function(){return!0},e.get=function(a){var c=!1;if(k){var e=b.sessionStorage.getItem(d+a);if(null!==e)try{c=angular.fromJson(e)}catch(a){}}return c},e.set=function(a,c){if(k){var e=angular.toJson(c);b.sessionStorage.setItem(d+a,e)}},e.remove=function(a){k&&b.sessionStorage.removeItem(d+a)};var f={};f.has=function(){try{return"localStorage"in b&&null!==b.localStorage}catch(a){return!1}},f.get=function(a){var b=!1;if(j){var c=localStorage.getItem(d+a);if(null!==c)try{b=angular.fromJson(c)}catch(a){}}return b},f.set=function(a,b){j&&localStorage.setItem(d+a,angular.toJson(b))},f.remove=function(a){j&&localStorage.removeItem(d+a)};var g=function(a,b){var c=!1;return c=e.get(a),b&&!c&&(c=f.get(a)),c},h=function(b,d,g,h){return e.set(b,d),g&&f.set(b,d),h&&c(function(){a.$broadcast(b,d)},10),!0},i=function(a,b){return e.remove(a),b&&f.remove(a),!0},j=f.has(),k=e.has();return{get:g,set:h,remove:i}}]),angular.module("ezpAppCore").factory("dataFactory",["$http","settingsService","cjwWebStorageService",function(a,b,c){var d=b.get("appSettings").pathPrefix,e=b.get("appSettings").ezpRestApiUrl,f=b.get("appSettings").ezpRestApiMediaType,g=b.get("restApiMethodsOverrides"),h={};return h.request=function(b,h){var i={method:b.method||"GET",url:b.url||b._href,cache:!1,async:!1,headers:b.headers||{}};if(h&&(i.url=e+i.url),"GET"===i.method&&i.url.indexOf(d)===-1){var j;for(var k in g)j=new RegExp(g[k][0]),j.test(i.url)&&(i.url=i.url.replace(g[k][1],g[k][2]))}"POST"===i.method,(b.mediaType||b["_media-type"])&&(i.headers.Accept=b.mediaType||b["_media-type"],h&&(i.headers.Accept=i.headers.Accept+"+"+f)),b.contentType&&(i.headers["Content-Type"]=b.contentType,h&&(i.headers["Content-Type"]=i.headers["Content-Type"]+"+"+f)),b.contentLength&&(i.headers["Content-Length"]=b.contentLength);var l=c.get("ezpSession");"undefined"!=typeof l&&(i.headers["X-CSRF-Token"]=l.csrfToken),b.data&&(i.data=b.data);var m=a(i).then(function(a){return a.data});return m},h}]),angular.module("ezpAppCore").filter("getapproute",["settingsService",function(a){return function(b,c){var d=b;if("roles"===c);else{var e=b.split("/locations");e[1]&&(d=e[1]),d=d.slice(1),d=d.replace(/\//g,"-"),d=a.get("appSettings").pathPrefix+a.get("appSettings").pathHome+"/"+d}return d}}]),angular.module("ezpAppCore").filter("getidfromhref",[function(){return function(a){return a._href.split("/")[6]}}]),angular.module("ezpAppCore").filter("i18n",["i18nService",function(a){return function(b,c){return a.getString(b,c)}}]),angular.module("ezpAppCore").service("i18nService",["settingsService",function(a){var b=a.get("appSettings").defaultLanguage[1],c={ui:{}};c.ui.en={},c.ui.de={Content:"Inhalte",Media:"Medien",User:"Benutzer",Roles:"Rechte",Classes:"Klassen",Setup:"Setup",Logout:"Abmelden"};var d=function(a,d){var e=a;return d&&c.hasOwnProperty(d)&&c[d][b][a]&&(e=c[d][b][a]),e},e=function(a,b){c[a]=b};return{appendDictonary:e,setCurrentLanguage:function(a){b=a},getCurrentLanguage:function(){return b},getString:d}}]),angular.module("ezpAppCore").factory("messagesFactory",["cjwWebStorageService",function(a){var b={},c={general:{500:"The server encountered an unexpected condition which prevented it from fulfilling the request - e.g. database down etc.",501:"The requested method was not implemented yet",401:"The user is not authorized",404:"Requested resource was not found",405:"The request method is not available",406:"The request contains an Accept header which is not supported. An href in the request doesn't match an API resource (prefix missing ?)",413:"Request Entity Too Large"},contentLoadById:{401:"The user is not authorized to read this object. This could also happen if there is no published version yet and another user owns a draft of this content",404:"The content with this ID is not found"},contentCreateDraft:{400:"The Input does not match the input schema definition or the validation on a field fails",401:"The user is not authorized to create this object in this location",404:"The parent location is specified in the request body and it does not exist"},contentCreateDraftFromCurrentVersion:{401:"The user is not authorized to update this object",403:"The current version is already a draft",404:"The content object was not found"},contentUpdateVersion:{400:"The Input does not match the input schema definition, In this case the response contains an ErrorMessage",401:"The user is not authorized to update this version",403:"The version is not allowed to change - i.e is not a DRAFT",404:"The content id or version id does not exist",412:"The current ETag does not match with the provided one in the If-Match header"},contentPublishVersion:{401:"The user is not authorized to publish this version",403:"The version is not a draft",404:"The content object or version nr was not found"},contentRemove:{401:"The user is not authorized to delete this object",404:"The content object was not found"},getContentType:{401:"The user is not authorized to read this content type",404:"The content type does not exist"},locationLoadByPath:{401:"The user is not authorized to read this location",404:"The location with the given path does not exist"},locationGetChildren:{401:"The user is not authorized to read this location",404:"The location with the given path does not exist"},locationCreate:{400:"The Input does not match the input schema definition",401:"The user is not authorized to create this location",403:"The location under the given parent id already exists"},subtreeMove:{401:"The user is not authorized to move this location",404:"The location with the given id does not exist"},subtreeRemove:{401:"The user is not authorized to delete this subtree",404:"The location with the given id does not exist"},roleList:{401:"The user has no permission to read roles"}};return b.pushHttpErrorCodeMessage=function(b,d){var e=b+" : not specified";e=c[d].hasOwnProperty(b)?b+" : "+c[d][b]:b+" : "+c.general[b],a.set("appHasMessage",{msg:e},!1,!0)},b}]),angular.module("ezpAppCore").factory("modalService",["$animate","$document","$compile","$controller","$rootScope","$q","$templateRequest","$timeout",function(a,b,c,d,e,f,g,h){function i(){var i=this,j=function(a,b){var c=f.defer();return a?c.resolve(a):b?g(b,!0).then(function(a){c.resolve(a)},function(a){c.reject(a)}):c.reject("No template or templateUrl has been specified."),c.promise},k=function(b,c){var d=b.children();return d.length>0?a.enter(c,b,d[d.length-1]):a.enter(c,b)};i.showModal=function(g){var i=angular.element(b[0].body),l=f.defer(),m=g.controller;return m?(j(g.template,g.templateUrl).then(function(b){function j(b){o.resolve(b),a.leave(s).then(function(){p.resolve(b),m.$destroy(),q.close=null,l=null,o=null,v=null,q=null,s=null,m=null}),n&&n()}var m=(g.scope||e).$new(),n=e.$on("$locationChangeSuccess",j),o=f.defer(),p=f.defer(),q={$scope:m,close:function(a,b){void 0!==b&&null!==b||(b=0),h(function(){j(a)},b)}};g.inputs&&angular.extend(q,g.inputs);var r=c(b),s=r(m);q.$element=s;var t=m[g.controllerAs],u=d(g.controller,q,!1,g.controllerAs);g.controllerAs&&t&&angular.extend(u,t),g.appendElement?k(g.appendElement,s):k(i,s);var v={controller:u,scope:m,element:s,close:o.promise,closed:p.promise};l.resolve(v)}).then(null,function(a){l.reject(a)}),l.promise):(l.reject("No controller has been specified."),l.promise)}}return new i}]),angular.module("ezpAppCore").factory("settingsService",[function(){var a={};return a.appSettings={ezpRestApiUrl:"/api/ezp/v2",ezpRestApiMediaType:"json",pathPrefix:"/adminapp",pathHome:"/location",pathAssets:"/bundles/cjwadminapp",defaultImageVariation:"medium",defaultLanguage:["eng-GB","en"]},a.restApiMethodsOverrides=[["/user/loggedin/[0-9]*$","/user/loggedin/",a.appSettings.pathPrefix+"/user/loggedin/"],["/content/locations/","/content/locations/",a.appSettings.pathPrefix+"/content/locations/"],["/content/search/","/content/search/",a.appSettings.pathPrefix+"/content/search/"],["/content/objects/[0-9]*(\\?languages=.*)$","/content/objects/",a.appSettings.pathPrefix+"/content/objects/"],["/content/objects/[0-9]*/locations$","/content/objects/",a.appSettings.pathPrefix+"/content/objects/"]],a.cacheSettings={locations:!0,locationChildren:!0,objectProperties:!0},a.dummyImg="data:image/gif;base64,R0lGODdhAQABAIAAAP///////ywAAAAAAQABAAACAkQBADs=",{get:function(b){return a[b]},set:function(b,c){a[b]=c}}}]),angular.module("ezpAppCore").controller("ezpMenuTopCtrl",["$scope","settingsService","cjwWebStorageService",function(a,b,c){function d(a){if(e.navigationParts.length=0,e.appHasMenuTop=!1,"on"===c.get("appHasMenuTop").status&&(e.appHasMenuTop=a,a!==!1)){f=c.get("ezpSettings").cjwadminapp_navigationparts;for(var b in f)g=f[b],g.enabled&&g.name&&g.href&&(e.navigationParts[e.navigationParts.length]=g);e.navigationParts[e.navigationParts.length]={name:"Logout",href:"/",self:!0}}}var e=this;e.pathPrefix=b.get("appSettings").pathPrefix,e.navigationParts=[],e.selectedItem=0;var f,g;d(!0),e.selection=function(a,b){e.selectedItem=a,c.set("appCurNaviPart",b,!1,!0)},a.$on("appHasMenuTop",function(a,b){d(b.status)})}]),angular.module("ezpAppCore").directive("ezpMenuTop",[function(){return{scope:!1,restrict:"E",controller:"ezpMenuTopCtrl",controllerAs:"menutop",templateUrl:"ui/menutop.view.html"}}]),angular.module("ezpAppCore").directive("ezpMessages",function(){return{restrict:"E",replace:!0,scope:!1,template:'<p id="messages" class="pointer" ng-if="messages.appHasMessage" ng-click="messages.close()" ng-bind="messages.appHasMessage"></p>',controllerAs:"messages",controller:["$scope","$timeout",function(a,b){var c=this;c.close=function(){c.appHasMessage=!1},a.$on("appHasMessage",function(a,d){c.appHasMessage=d.msg,b(function(){c.appHasMessage=!1},1e4)})}]}}),angular.module("ezpAppCore").directive("ezpModalLayout",[function(){return{scope:!1,restrict:"E",replace:!0,templateUrl:"ui/modal.layout.template.html"}}]),angular.module("ezpAppCore").directive("ezpSidebar",[function(){return{scope:!1,restrict:"E",replace:!0,controllerAs:"sidebar",controller:["$scope",function(a){var b=this;b.appHasSidebar="off",a.$on("appHasSidebar",function(a,c){b.appHasSidebar=c.status+"/menu.html"})}],template:'<div class="left" id="sidebar" ng-if="sidebar.appHasSidebar != \'off\'"><div ng-include="sidebar.appHasSidebar"></div></div>'}}]),angular.module("ezpAppCore").directive("cjwTabset",function(){return{restrict:"E",transclude:!0,template:'<ul class="cjw-tabset"><li class="cjw-tab fa" ng-class="{ \'fa-arrow-down\': expanded, \'fa-arrow-up\': !expanded }" ng-click="contentShowHide()"></li><li ng-repeat="tab in ::tabs" ng-class="{selected:tab.selected}" class="cjw-tab" ng-click="selectTab(tab);update();">{{tab.name}}</li></ul><ng-transclude></ng-transclude>',scope:!1,controller:["$scope",function(a){var b=0;a.expanded=!0,a.tabs=[],this.addTab=function(b){a.tabs.push(b)},a.selectTab=function(c){for(var d=0;d<a.tabs.length;d++)c.id!==a.tabs[d].id?a.tabs[d].selected=!1:(a.tabs[d].selected=!0,b=d,a.expanded=!0)},a.contentShowHide=function(){a.expanded?(a.tabs[b].selected=!1,a.expanded=!1):(a.expanded=!0,a.tabs[b].selected=!0)}}]}}),angular.module("ezpAppCore").directive("cjwTab",function(){return{restrict:"E",transclude:!0,replace:!0,require:"^cjwTabset",scope:{id:"@id",name:"@name"},template:'<div id="{{id}}" ng-class="{selected:selected}" class="cjw-tab-content"><ng-transclude></ng-transclude></div>',link:function(a,b,c,d){a.selected=""===c.selected||c.selected===!0,d.addTab(a)}}}),angular.module("ezpAppCore").directive("cjwToolBox",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{title:"@title",klass:"@class"},template:'<div class="{{klass}} cjw-tool-box"><div class="cjw-tool-box-title pointer" ng-click="contentShowHide()"><p class="fa" ng-class="{ \'fa-arrow-down\': expanded, \'fa-arrow-up\': !expanded }"></p><p><strong>{{title}}</strong></p></div><div class="cjw-tool-box-body" ng-class="{hide:!expanded}"><ng-transclude></ng-transclude></div></div>',controller:["$scope",function(a){a.expanded=!0,a.contentShowHide=function(){a.expanded?a.expanded=!1:a.expanded=!0}}]}});